var __awaiter=this&&this.__awaiter||function(e,t,i,r){function o(e){return e instanceof i?e:new i((function(t){t(e)}))}return new(i||(i=Promise))((function(i,s){function n(e){try{a(r.next(e))}catch(t){s(t)}}function l(e){try{a(r["throw"](e))}catch(t){s(t)}}function a(e){e.done?i(e.value):o(e.value).then(n,l)}a((r=r.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var i={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,o,s,n;return n={next:l(0),throw:l(1),return:l(2)},typeof Symbol==="function"&&(n[Symbol.iterator]=function(){return this}),n;function l(e){return function(t){return a([e,t])}}function a(n){if(r)throw new TypeError("Generator is already executing.");while(i)try{if(r=1,o&&(s=n[0]&2?o["return"]:n[0]?o["throw"]||((s=o["return"])&&s.call(o),0):o.next)&&!(s=s.call(o,n[1])).done)return s;if(o=0,s)n=[n[0]&2,s.value];switch(n[0]){case 0:case 1:s=n;break;case 4:i.label++;return{value:n[1],done:false};case 5:i.label++;o=n[1];n=[0];continue;case 7:n=i.ops.pop();i.trys.pop();continue;default:if(!(s=i.trys,s=s.length>0&&s[s.length-1])&&(n[0]===6||n[0]===2)){i=0;continue}if(n[0]===3&&(!s||n[1]>s[0]&&n[1]<s[3])){i.label=n[1];break}if(n[0]===6&&i.label<s[1]){i.label=s[1];s=n;break}if(s&&i.label<s[2]){i.label=s[2];i.ops.push(n);break}if(s[2])i.ops.pop();i.trys.pop();continue}n=t.call(e,i)}catch(l){n=[6,l];o=0}finally{r=s=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(e,t,i){if(i||arguments.length===2)for(var r=0,o=t.length,s;r<o;r++){if(s||!(r in t)){if(!s)s=Array.prototype.slice.call(t,0,r);s[r]=t[r]}}return e.concat(s||Array.prototype.slice.call(t))};import{r as registerInstance,h,e as getElement}from"./index-f21e28a1.js";import{a as hasSlot}from"./index-62c726ed.js";import{T as TranslationController}from"./Translation-e52da6d2.js";var formControlCss=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}.error{color:#d72d30;font-weight:400;font-size:12px;line-height:20px;-webkit-padding-before:4px;padding-block-start:4px;-webkit-padding-start:2px;padding-inline-start:2px}label{font-size:12px;color:#475867;font-weight:600;-webkit-margin-after:4px;margin-block-end:4px;-webkit-padding-start:2px;padding-inline-start:2px;display:block}label.required::after{content:"*";position:relative;display:inline-block;inset-block-start:2px;font-size:14px;color:#d72d30;-webkit-padding-start:2px;padding-inline-start:2px;font-weight:700}.hint{font-weight:400;font-size:12px;color:#475867;line-height:20px;-webkit-padding-before:4px;padding-block-start:4px;-webkit-padding-start:2px;padding-inline-start:2px}.form-control-container{margin-inline:0em;margin-block:1em}.d-none{display:none}';var NATIVE_CONTROLS=["input","select","textarea"];var FormControl=function(){function e(e){registerInstance(this,e);this.type="TEXT";this.hidden=false;this.required=false;this.hint="";this.placeholder="";this.choices=[];this.fieldProps={};this.touched=false;this.error="";this.shouldRender=true;this.disabled=false;this.hasSlot=false}e.prototype.renderControl=function(){var e,t,i,r,o,s,n,l,a,d;var c=this;var u,p,v,f,b,m,g,y,O,x,C,P,j,w,_,T,k,E,L,S,q,R,A,I,D,F,N,M,V;if(this.hasSlot)return null;if(!this.name)return null;var U;switch(this.type){case"TEXT":case"NUMBER":case"DECIMAL":case"EMAIL":case"TEL":case"URL":{var z=this.type==="DECIMAL"?"number":(u=this.type)===null||u===void 0?void 0:u.toLowerCase();var B=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled,type:z}),(p=this.controlProps)===null||p===void 0?void 0:p.inputProps(this.name,z)),(e={state:this.touched&&this.error&&"error"||"normal"},e["hint-text"]=this.hint,e["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),e));U=h("fw-input",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}));break}case"PARAGRAPH":{var B=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),(v=this.controlProps)===null||v===void 0?void 0:v.inputProps(this.name,(f=this.type)===null||f===void 0?void 0:f.toLowerCase())),(t={state:this.touched&&this.error&&"error"||"normal"},t["hint-text"]=this.hint,t["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),t));U=h("fw-textarea",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break;case"DATE":{var B=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),(b=this.controlProps)===null||b===void 0?void 0:b.inputProps(this.name,(m=this.type)===null||m===void 0?void 0:m.toLowerCase())),(i={state:this.touched&&this.error&&"error"||"normal"},i["hint-text"]=this.hint,i["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),i));U=h("fw-datepicker",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break;case"DATE_TIME":{var B=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),(g=this.controlProps)===null||g===void 0?void 0:g.inputProps(this.name,(y=this.type)===null||y===void 0?void 0:y.toLowerCase())),(r={state:this.touched&&this.error&&"error"||"normal"},r["hint-text"]=this.hint,r["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),r.showTimePicker=true,r));U=h("fw-datepicker",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break;case"CHECKBOX":{var B=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:"",required:this.required,disabled:this.disabled}),(O=this.controlProps)===null||O===void 0?void 0:O.checkboxProps(this.name,(x=this.type)===null||x===void 0?void 0:x.toLowerCase())),(o={state:this.touched&&this.error&&"error"||"normal"},o["hint-text"]=this.hint,o["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),o));U=h("fw-checkbox",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}),this.label)}break;case"RADIO":{var H=(C=this.controlProps)===null||C===void 0?void 0:C.radioProps(this.name,(P=this.type)===null||P===void 0?void 0:P.toLowerCase());var X=Object.assign(Object.assign(Object.assign({},this.fieldProps),(s={name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,"allow-empty":true,state:this.touched&&this.error&&"error"||"normal"},s["hint-text"]=this.hint,s["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),s)),H);U=h("fw-radio-group",Object.assign({},X,{ref:function(e){return c.crayonsControlRef=e}}),(j=this.choices.sort((function(e,t){var i,r;var o=(i=e===null||e===void 0?void 0:e.position)!==null&&i!==void 0?i:0;var s=(r=t===null||t===void 0?void 0:t.position)!==null&&r!==void 0?r:0;return o-s})))===null||j===void 0?void 0:j.map((function(e){var t=e[X.optionValuePath]||e.value;var i=e[X.optionLabelPath]||e.value;return h("fw-radio",{name:c.name,value:t,disabled:c.disabled,state:c.touched&&c.error?"error":"normal"},i)})))}break;case"DROPDOWN":case"MULTI_SELECT":{var H=(w=this.controlProps)===null||w===void 0?void 0:w.selectProps(this.name,(_=this.type)===null||_===void 0?void 0:_.toLowerCase());var G=(T=this.fieldProps)===null||T===void 0?void 0:T.field_options;var B=Object.assign(Object.assign({},this.fieldProps),(n={name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled,multiple:this.type==="MULTI_SELECT",state:this.touched&&this.error&&"error"||"normal"},n["hint-text"]=this.hint,n["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),n));B=Object.assign(Object.assign(Object.assign({},B),H),{options:this.choices.sort((function(e,t){var i,r;var o=(i=e===null||e===void 0?void 0:e.position)!==null&&i!==void 0?i:0;var s=(r=t===null||t===void 0?void 0:t.position)!==null&&r!==void 0?r:0;return o-s}))});if(G===null||G===void 0?void 0:G.option_value_path)B["optionValuePath"]=G.option_value_path;if(G===null||G===void 0?void 0:G.option_label_path)B["optionLabelPath"]=G.option_label_path;U=h("fw-select",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break;case"RELATIONSHIP":case"AUTO_COMPLETE":{var H=(k=this.controlProps)===null||k===void 0?void 0:k.selectProps(this.name,(E=this.type)===null||E===void 0?void 0:E.toLowerCase());var G=(L=this.fieldProps)===null||L===void 0?void 0:L.field_options;var B=Object.assign(Object.assign({},this.fieldProps),(l={name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled,state:this.touched&&this.error&&"error"||"normal"},l["hint-text"]=this.hint,l["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),l));if(Array.isArray(H===null||H===void 0?void 0:H.value)&&typeof H.value[0]==="object"){B.selectedOptions=H.value}if(((S=B.selectedOptions)===null||S===void 0?void 0:S.length)>0){(q=this.crayonsControlRef)===null||q===void 0?void 0:q.setSelectedOptions(B.selectedOptions)}else if(!(H===null||H===void 0?void 0:H.value)){(R=this.crayonsControlRef)===null||R===void 0?void 0:R.setSelectedOptions([])}B.noDataText=TranslationController.t("search.startTyping");if(G===null||G===void 0?void 0:G.option_value_path)B["optionValuePath"]=G.option_value_path;if(G===null||G===void 0?void 0:G.option_label_path)B["optionLabelPath"]=G.option_label_path;U=h("fw-select",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break;case"TIME":{var B=Object.assign(Object.assign(Object.assign(Object.assign({},this.fieldProps),{name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled}),(A=this.controlProps)===null||A===void 0?void 0:A.inputProps(this.name,(I=this.type)===null||I===void 0?void 0:I.toLowerCase())),(a={state:this.touched&&this.error&&"error"||"normal"},a["hint-text"]=this.hint,a["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),a));U=h("fw-timepicker",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break;case"FILES":{var K=((D=this.fieldProps)===null||D===void 0?void 0:D.multiple)?true:false;var W=this.touched&&this.error?TranslationController.t(this.error,{field:this.label||this.name}):"";var H=(F=this.controlProps)===null||F===void 0?void 0:F.fileProps(this.name,K);var B=Object.assign(Object.assign({},this.fieldProps),{name:this.name,description:this.placeholder,required:this.required,isBatchUpload:true,isFormLabel:true,hintText:this.hint,errorText:W});if(H===null||H===void 0?void 0:H.value){B.initialFiles=H.value}U=h("fw-file-uploader-2",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break;case"DEPENDENT_FIELD":{var H=(N=this.controlProps)===null||N===void 0?void 0:N.selectProps(this.name,(M=this.type)===null||M===void 0?void 0:M.toLowerCase());var G=(V=this.fieldProps)===null||V===void 0?void 0:V.field_options;var B=Object.assign(Object.assign({},this.fieldProps),(d={name:this.name,placeholder:this.placeholder,label:this.label,required:this.required,disabled:this.disabled,state:this.touched&&this.error&&"error"||"normal"},d["hint-text"]=this.hint,d["error-text"]=TranslationController.t(this.error,{field:this.label||this.name}),d));B=Object.assign(Object.assign(Object.assign({},B),H),{selectProps:this.controlProps.selectProps,options:this.choices.sort((function(e,t){var i,r;var o=(i=e===null||e===void 0?void 0:e.position)!==null&&i!==void 0?i:0;var s=(r=t===null||t===void 0?void 0:t.position)!==null&&r!==void 0?r:0;return o-s}))});if(G===null||G===void 0?void 0:G.option_value_path)B["optionValuePath"]=G.option_value_path;if(G===null||G===void 0?void 0:G.option_label_path)B["optionLabelPath"]=G.option_label_path;U=h("fw-nested-select",Object.assign({},B,{ref:function(e){return c.crayonsControlRef=e}}))}break}return U};e.prototype.componentWillUpdate=function(){this.setSlotElementValue()};e.prototype.setFocus=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,i,r;return __generator(this,(function(o){switch(o.label){case 0:if(!!this.hasSlot)return[3,2];return[4,(t=(e=this.crayonsControlRef)===null||e===void 0?void 0:e.setFocus)===null||t===void 0?void 0:t.call(e)];case 1:o.sent();return[3,3];case 2:(r=(i=this.slotElement)===null||i===void 0?void 0:i.focus)===null||r===void 0?void 0:r.call(i);o.label=3;case 3:return[2]}}))}))};e.prototype.handleSlotChange=function(){var e;this.hasSlot=hasSlot(this.el);this.slotElement=(e=__spreadArray([],this.el.querySelectorAll("*"),true).filter((function(e){var t;return NATIVE_CONTROLS.includes((t=e===null||e===void 0?void 0:e.tagName)===null||t===void 0?void 0:t.toLowerCase())})))===null||e===void 0?void 0:e[0];this.setSlotElementValue()};e.prototype.setSlotElementValue=function(){var e=this;if(this.slotElement){setTimeout((function(){var t,i;switch(e.type){case"CHECKBOX":e.slotElement.checked=(t=e.value)!==null&&t!==void 0?t:false;break;default:e.slotElement.value=(i=e.value)!==null&&i!==void 0?i:""}}),100)}};e.prototype.render=function(){var e=this;return this.shouldRender&&h("div",{class:"form-control-container ".concat(this.hidden?"d-none":"")},this.renderControl(),this.hasSlot&&h("label",{htmlFor:this.name,class:{label:true,required:this.required}},this.label),h("slot",{onSlotchange:function(){return e.handleSlotChange()}}),this.hasSlot&&!(this.touched&&this.error)&&h("div",{class:"hint",id:"hint-".concat(this.name)},this.hint),this.hasSlot&&this.touched&&this.error&&h("div",{class:"error",id:"error-".concat(this.name)},TranslationController.t(this.error,{field:this.label||this.name})))};Object.defineProperty(e.prototype,"el",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();FormControl.style=formControlCss;export{FormControl as fw_form_control};