var __spreadArray=this&&this.__spreadArray||function(e,i,t){if(t||arguments.length===2)for(var r=0,n=i.length,o;r<n;r++){if(o||!(r in i)){if(!o)o=Array.prototype.slice.call(i,0,r);o[r]=i[r]}}return e.concat(o||Array.prototype.slice.call(i))};import{r as registerInstance,c as createEvent,h,i as Host,g as getElement}from"./index-f435cf58.js";import{i as i18nText,d as deepCloneObject,f as hasCustomProperty,l as getNestedKeyValueFromObject,m as hasDuplicates,r as removeFirstOccurrence,u as updateFieldAttributes,n as checkIfCustomToggleField,h as hasPermission,o as updateLevelSelection,p as updateChoicesInFields,q as deleteChoicesInFields,s as buildChoicesFromText,t as deriveInternalNameFromLabel,v as getDependentLevels,w as getMaxLimitProperty,x as getChildChoices,b as getMaximumLimitsConfig,k as formMapper}from"./form-builder-utils-21bc18f0.js";import{p as presetSchema}from"./form-builder-preset-de47aadf.js";import"./Translation-7ee0e3b3.js";import"./index-fb937839.js";var fieldEditorCss=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:inline-block;width:100%;max-width:990px}@media screen and (prefers-reduced-motion: reduce){.fw-field-editor{-webkit-transition:none;transition:none}.fw-field-editor-delete-button{-webkit-transition:none;transition:none}}.flex{display:-ms-flexbox;display:flex}.flex-space-between{-ms-flex-pack:justify;justify-content:space-between}.flex-space-between div{width:100%}.fw-field-editor{max-width:990px;width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;outline:0;background-color:#fff;border:1px solid #cfd7df;border-radius:8px;-webkit-transition:-webkit-box-shadow 0.3s;transition:-webkit-box-shadow 0.3s;transition:box-shadow 0.3s;transition:box-shadow 0.3s, -webkit-box-shadow 0.3s}.fw-field-editor .fw-field-editor-header{width:100%;height:48px;padding:8px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff;border-radius:8px}.fw-field-editor .fw-field-editor-header .fw-field-editor-drag-container{min-width:24px;width:24px;height:100%;-webkit-margin-end:8px;margin-inline-end:8px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;opacity:1;cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.fw-field-editor .fw-field-editor-header .fw-field-editor-header-content{width:calc(100% - 24px - 8px - 24px - 8px);height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.fw-field-editor .fw-field-editor-header .fw-field-editor-header-content .fw-field-editor-icon-container{min-width:24px;width:24px;height:24px;min-height:24px;-webkit-margin-end:8px;margin-inline-end:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-radius:4px}.fw-field-editor .fw-field-editor-header .fw-field-editor-header-content .fw-field-editor-label{width:auto;margin:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-size:14px;font-weight:600;word-break:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.fw-field-editor .fw-field-editor-header .fw-field-editor-header-content .fw-field-editor-key-fw-labels{width:auto;height:100%;-webkit-margin-start:24px;margin-inline-start:24px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:10px}.fw-field-editor .fw-field-editor-header .fw-field-editor-header-content .fw-field-editor-key-fw-labels .fw-field-editor-content-fw-label{width:-webkit-max-content;width:-moz-max-content;width:max-content;border:none}.fw-field-editor .fw-field-editor-header .fw-field-editor-delete-button{opacity:0;-webkit-margin-start:8px;margin-inline-start:8px;-webkit-transition:opacity 0.3s;transition:opacity 0.3s}.fw-field-editor .fw-field-editor-header .fw-field-editor-lock-container{width:16px;height:16px;opacity:0.6;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-webkit-margin-start:8px;margin-inline-start:8px}.fw-field-editor .fw-field-editor-header .fw-field-editor-deleting-state{-webkit-margin-start:8px;margin-inline-start:8px}.fw-field-editor .fw-field-editor-body{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff;border-radius:8px;display:none}.fw-field-editor .fw-field-editor-body .fw-field-editor-content{width:100%;height:auto;min-height:72px;padding-inline:40px;padding-block:20px;display:-ms-flexbox;display:flex;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#f5f7f9;-webkit-border-before:1px solid #eceff2;border-block-start:1px solid #eceff2;-webkit-border-after:1px solid #eceff2;border-block-end:1px solid #eceff2}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:25px;--fw-hint-color:#475867}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-required-input{max-width:70%;width:70%}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-internal-name-base{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:4px}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-internal-name-base .fw-field-editor-internal-name-header-label{display:block;font-size:12px;color:var(--fw-label-color, #475867);font-weight:600;-webkit-margin-after:4px;margin-block-end:4px;-webkit-padding-start:2px;padding-inline-start:2px;line-height:20px}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-internal-name-base .fw-field-editor-internal-name-header-label.required::after{content:"*";position:relative;display:inline-block;inset-block-start:2px;font-size:14px;color:#d72d30;-webkit-padding-start:2px;padding-inline-start:2px;font-weight:700}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-internal-name-base .fw-field-editor-internal-name-container{max-width:70%;width:70%;height:auto;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;gap:4px}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-internal-name-base .fw-field-editor-internal-name-container .fw-field-editor-content-required-internal-name-input{max-width:100%;width:100%}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-internal-name-base .fw-field-editor-internal-name-container .fw-field-editor-internal-name-prefix{font-size:14px;font-weight:500;color:#12344d;display:block;-webkit-margin-before:8px;margin-block-start:8px}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-checkboxes{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:start;align-items:flex-start;gap:8px}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-checkboxes .fw-field-editor-content-checkboxes-header-label{font-size:16px;font-weight:600;color:#475867;display:block;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-checkboxes .fw-field-editor-content-checkbox-container{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-checkboxes .fw-field-editor-content-checkbox-container .fw-field-editor-content-fw-checkbox{width:auto;max-width:100%}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-checkboxes .fw-field-editor-content-checkbox-container .fw-field-editor-content-fw-icon{-webkit-margin-start:8px;margin-inline-start:8px;-webkit-margin-before:4px;margin-block-start:4px}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-lookup{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-content-dropdown{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-status-toggle{border:1px solid #cfd7df}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-status-toggle .fw-field-editor-status-toggle-item{display:grid;font-size:14px;font-weight:600;grid-template-columns:1fr 1fr;-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-after:8px;padding-block-end:8px;-webkit-padding-end:0;padding-inline-end:0;-webkit-padding-before:8px;padding-block-start:8px}.fw-field-editor .fw-field-editor-body .fw-field-editor-content .fw-field-editor-content-required .fw-field-editor-status-toggle .fw-field-editor-status-toggle-item.header{background:#ebeff3;border:1px solid #cfd7df;border-width:0 1px 1px 1px;font-size:12px}.fw-field-editor .fw-field-editor-body .fw-field-editor-footer{width:100%;height:72px;padding:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-sizing:border-box;box-sizing:border-box;background-color:#fff;border-radius:8px}.fw-field-editor .fw-field-editor-body .fw-field-editor-footer .fw-field-editor-footer-field-error-container{width:auto;height:100%;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-webkit-padding-start:32px;padding-inline-start:32px;-webkit-padding-after:0;padding-block-end:0;-webkit-padding-end:0;padding-inline-end:0;-webkit-padding-before:0;padding-block-start:0;gap:8px}.fw-field-editor .fw-field-editor-body .fw-field-editor-footer .fw-field-editor-footer-field-error-container .fw-field-editor-footer-field-error-msg{display:block;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;-webkit-margin-before:4px;margin-block-start:4px;-webkit-margin-start:2px;margin-inline-start:2px;color:#d72d30;font-weight:400;font-size:12px;line-height:20px;height:20px;margin:0}.fw-field-editor .fw-field-editor-body .fw-field-editor-footer .fw-field-editor-footer-buttons-container{width:auto;height:100%;padding:0;-webkit-padding-end:16px;padding-inline-end:16px;gap:12px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end}.fw-field-editor .fw-field-editor-body .fw-field-editor-footer-with-error{-ms-flex-pack:justify;justify-content:space-between}.fw-field-editor:hover{-webkit-box-shadow:0px 0px 1px rgba(24, 50, 71, 0.3), 0px 2px 8px rgba(22, 29, 37, 0.15);box-shadow:0px 0px 1px rgba(24, 50, 71, 0.3), 0px 2px 8px rgba(22, 29, 37, 0.15)}.fw-field-editor:hover .fw-field-editor-delete-button{opacity:1}.fw-field-editor:focus .fw-field-editor-delete-button{opacity:0}.fw-field-editor--disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:not-allowed;opacity:0.6}.fw-field-editor--disabled-sort .fw-field-editor-drag-container{opacity:0 !important;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fw-field-editor--deleting{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:not-allowed;opacity:0.8}.fw-field-editor--primary .fw-field-editor-header{background:rgba(254, 241, 225, 0.4)}.fw-field-editor--primary .fw-field-editor-drag-container{opacity:0 !important;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.fw-field-editor--required .fw-field-editor-header .fw-field-editor-label:after{content:"*";inset-block-start:2px;font-size:14px;color:#d72d30;-webkit-padding-start:2px;padding-inline-start:2px;font-weight:700}.fw-field-editor--expanded{border:none;-webkit-box-shadow:0px 0px 1px rgba(24, 50, 71, 0.3), 0px 2px 8px rgba(22, 29, 37, 0.15);box-shadow:0px 0px 1px rgba(24, 50, 71, 0.3), 0px 2px 8px rgba(22, 29, 37, 0.15)}.fw-field-editor--expanded .fw-field-editor-header{cursor:unset}.fw-field-editor--expanded .fw-field-editor-header .fw-field-editor-label:after{content:""}.fw-field-editor--expanded .fw-field-editor-header .fw-field-editor-drag-container{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:unset;opacity:0}.fw-field-editor--expanded .fw-field-editor-header .fw-field-editor-delete-button{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:unset;opacity:0}.fw-field-editor--expanded .fw-field-editor-body{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.fw-field-editor-content-label-interalName{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:16px}.fw-field-editor-content-label{text-transform:uppercase;color:#12344d;font-size:12px;font-weight:600;line-height:20px;-webkit-margin-after:8px;margin-block-end:8px;display:block}.fw-field-editor-content-dependent-label{color:#12344d;font-size:14px;font-weight:400;line-height:20px;-webkit-margin-after:8px;margin-block-end:8px;display:block}.fw-field-editor-textbox{-webkit-margin-before:12px;margin-block-start:12px;-webkit-margin-after:12px;margin-block-end:12px;display:block}.fw-field-editor-textbox textarea{color:#12344d;resize:none;width:100%;border-radius:4px;font-family:inherit;padding-block:8px;padding-inline:8px;line-height:20px}.fw-field-editor-textbox textarea:focus{outline:none;background-color:#fff;-webkit-box-shadow:0 0 0 2px #2c5cc5;box-shadow:0 0 0 2px #2c5cc5}.fw-field-editor-delete-modal-content{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:16px;-webkit-padding-before:4px;padding-block-start:4px}';var FieldEditor=function(){function e(e){var i=this;registerInstance(this,e);this.fwExpand=createEvent(this,"fwExpand",7);this.fwUpdate=createEvent(this,"fwUpdate",7);this.fwDelete=createEvent(this,"fwDelete",7);this.fwReorder=createEvent(this,"fwReorder",7);this.KEY_INTERNAL_NAME="internalName";this.isInternalNameEdited=false;this.internalNamePrefix="";this.isNewField=false;this.isDependentField=false;this.textboxDependentValue=presetSchema.textboxDependentValue;this.productName="CUSTOM_OBJECTS";this.isLoading=false;this.disabled=false;this.expanded=false;this.dataProvider=null;this.formValues=null;this.lookupTargetObjects=false;this.disabledSort=false;this.entityName="";this.isPrimaryField=false;this.enableFilterable=true;this.enableUnique=true;this.index=-1;this.name="";this.role="admin";this.permission={view:true,create:true,edit:true,delete:true};this.isValuesChanged=false;this.fieldBuilderOptions=null;this.showErrors=false;this.duplicateErrors=false;this.formErrorMessage="";this.labelErrorMessage="";this.labelWarningMessage="";this.internalNameErrorMessage="";this.internalNameWarningMessage="";this.isDeleting=false;this.dependentLevels={};this.showDependentFieldTextbox=false;this.getInterpolatedMaxLimitLabel=function(e){if(e&&e!==""){try{var t=getMaxLimitProperty(i.productName,e);if(t){return i18nText(t.message,{count:t.count})}}catch(r){return""}}return""};this.setCheckboxesAvailability=function(e){if(presetSchema&&e&&i.defaultFieldTypeSchema){var t=i.isNewField;var r=i.dataProvider;var n=presetSchema.fieldEditorValidations.checkboxDetails;var o=false;var a=false;var l=n.keyMapper;var d=i.isPrimaryField?n.existingPrimaryFieldEnabledCheckboxes:n.existingFieldEnabledCheckboxes;var s=deepCloneObject(i.defaultFieldTypeSchema);var f=t?e.checkboxes:s.checkboxes;var c=f===null||f===void 0?void 0:f.length;var u=-1;for(var p=0;p<c;p++){var h=f[p];var b=h.key;var m=false;if(t){m=h.selected}else{var x=l[b];if(hasCustomProperty(r,x)){var g=r[x];m=g==="true"||g===true?true:false}else{var w=getNestedKeyValueFromObject(r,x);if(w){m=w==="true"||w===true?true:false}}h.selected=m;h.enabled=d===null||d===void 0?void 0:d[b]}if(b==="unique"){a=m}else if(b==="required"){o=m}if(h.enabled){if(b==="filterable"&&!i.enableFilterable){h.enabled=false;h.disabledMessage=i.getInterpolatedMaxLimitLabel("filterable")}else if(b==="unique"&&!i.enableUnique){h.enabled=false;h.disabledMessage=i.getInterpolatedMaxLimitLabel("unique")}}else if(b==="filterable"){u=p}}if(u>-1&&a&&f[u].enabled){f[u].enabled=false;f[u].selected=true;f[u].disabledMessage=""}i.fieldBuilderOptions=Object.assign(Object.assign({},e),{checkboxes:deepCloneObject(f),unique:a,required:o})}};this.startParentDragging=function(){if(i.expanded){return}i.enableParentDrag(true)};this.stopParentDragging=function(){i.enableParentDrag(false)};this.enableParentDrag=function(e){if(i.divFieldBase){i.fwReorder.emit({value:e});if(e){i.divFieldBase.setAttribute("draggable","true")}else{i.divFieldBase.removeAttribute("draggable")}}};this.validateLabelErrors=function(e){if(!e){i.labelErrorMessage=i18nText("errors.emptyFieldName");return false}else{try{var t=e.toLowerCase();var r=i.formValues.fields;if(r&&r.length>0&&r.some((function(e,r){return i.index!==r&&!(e===null||e===void 0?void 0:e.isNew)&&e.label.toLowerCase()===t}))){i.labelErrorMessage=i18nText("errors.fieldNameExists");return false}}catch(n){console.error("Error occured in validateLabelErrors: ".concat(n))}}i.labelErrorMessage="";return true};this.validateDuplicateErrors=function(e){var t=Object.keys(i.dictInteractiveElements).filter((function(i){return i.includes(e)})).map((function(e){return i.dictInteractiveElements[e].value}));var r=hasDuplicates(t);if(r){i.labelErrorMessage=i18nText("errors.fieldNameExists")}return r};this.validateInternalNameErrors=function(e){if(!e){i.internalNameErrorMessage=i18nText("errors.emptyFieldName");return false}else{try{var t=i.internalNamePrefix+e.toLowerCase();var r=i.formValues.fields;if(r&&r.length>0&&r.some((function(e,r){return i.index!==r&&!(e===null||e===void 0?void 0:e.isNew)&&e.name.toLowerCase()===t}))){i.internalNameErrorMessage=i18nText("errors.fieldNameExists");return false}else{var n=/^[A-Z0-9_]*$/i;if(!n.test(e)){i.internalNameErrorMessage=i18nText("errors.useOnlyEnglishChars");return false}}}catch(o){console.error("Error occured in validateInternalNameErrors: ".concat(o))}}i.internalNameErrorMessage="";return true};this.validateDropdownErrors=function(e){if(!e||e.length<1){i.formErrorMessage=i18nText("errors.minimum");return false}if(i.errorType&&i.errorType!==""){if(i.errorType===i18nText("errors.deleteDropDownChoice")){i.formErrorMessage=i.errorType;return true}i.formErrorMessage="";return false}i.formErrorMessage="";return true};this.validateLookupErrors=function(e){if(e&&hasCustomProperty(e,"relationship")&&hasCustomProperty(e,"target")&&e.relationship!==""&&e.target>0){return true}i.formErrorMessage="";return false};this.addFieldHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();var t=true;var r=null;var n={type:i.dataProvider.type,isPrimaryField:i.isPrimaryField};if(i.isDependentField){n["fields"]=[{field_options:{level:"1",dependent:"true"},type:"2",fields:[{field_options:{level:"2",dependent:"true"},type:"2",fields:[{field_options:{level:"3",dependent:"true"},type:"2"}]}]}]}if(i.validateDuplicateErrors("name_level_")){i.duplicateErrors=true;i.showErrors=true;return}i.duplicateErrors=false;for(var o in i.dictInteractiveElements){var a=i.dictInteractiveElements[o];var l=a.tagName.toLowerCase();switch(l){case"fw-input":var d=a.value;if(o==="name"){t=i.validateLabelErrors(d);if(t){i.showErrors=false;i.labelErrorMessage="";n[o]=d||""}else{i.showErrors=true;return}}else if(o===i.KEY_INTERNAL_NAME){if(i.isNewField){t=i.validateInternalNameErrors(d);if(t){i.showErrors=false;i.internalNameErrorMessage="";n[o]="".concat(i.internalNamePrefix).concat(d)||""}else{i.showErrors=true;return}}}else if(o.includes("name_level_")){r=removeFirstOccurrence(o,"name_level_");t=i.validateLabelErrors(d);if(t){i.showErrors=false;i.labelErrorMessage="";n=updateFieldAttributes(n,r,{name:d})}else{i.showErrors=true;return}}else if(o.includes("".concat(i.KEY_INTERNAL_NAME,"_level_"))){r=removeFirstOccurrence(o,"".concat(i.KEY_INTERNAL_NAME,"_level_"));t=i.validateInternalNameErrors(d);if(t){i.showErrors=false;i.internalNameErrorMessage="";n=updateFieldAttributes(n,r,{internalName:"".concat(i.internalNamePrefix).concat(d)||""})}else{i.showErrors=true;return}}break;case"fw-checkbox":n[o]=a.checked||false;break;case"fw-fb-field-dropdown":{if(i.isDependentField){r=removeFirstOccurrence(o,"choices_level_");var s=deepCloneObject(a.dataProvider)||[];t=i.validateDropdownErrors(s);if(t){i.showErrors=false;n=updateFieldAttributes(n,r,{choices:s})}else{a.validateErrors();i.showErrors=true;return}}else{var s=deepCloneObject(a.dataProvider)||[];t=i.validateDropdownErrors(s);if(t){i.showErrors=false;n[o]=s||[]}else{a.validateErrors();i.showErrors=true;return}}break}case"fw-fb-field-lookup":{var f=deepCloneObject(a.dataResponse)||null;t=i.validateLookupErrors(f);if(t){i.showErrors=false;n[o]=f}else{i.showErrors=true;return}break}}}if(checkIfCustomToggleField(i.productName,i.dataProvider.name)){n["choices"]=__spreadArray([],i.dataProvider.choices,true)}if(t){if(!i.isNewField){n[i.KEY_INTERNAL_NAME]=i.dataProvider.name}i.internalNameWarningMessage="";i.internalNameErrorMessage="";i.labelWarningMessage="";i.labelErrorMessage="";i.formErrorMessage="";i.showErrors=false;i.fwUpdate.emit({index:i.index,isNew:i.isNewField,value:Object.assign({},n)})}};this.cancelFieldHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();if(i.expanded){i.dictInteractiveElements={};i.expanded=false;i.internalNameErrorMessage="";i.labelWarningMessage="";i.labelErrorMessage="";i.formErrorMessage="";i.showErrors=false;if(i.isValuesChanged){i.dataProvider=i.oldFormValues?deepCloneObject(i.oldFormValues):null}i.fwExpand.emit({expanded:false,index:i.index,isNew:i.isNewField})}};this.expandHandler=function(e){if(i.disabled){e.preventDefault();e.stopPropagation();return}if(e.detail&&e.detail>1){return}if(!i.expanded){i.dictInteractiveElements={};i.expanded=true;i.fwExpand.emit({expanded:true,index:i.index,isNew:i.isNewField,value:Object.assign({},i.dataProvider)})}};this.deleteFieldClickHandler=function(e){var t;e.stopImmediatePropagation();e.stopPropagation();var r=hasPermission(i.role,i.permission,"DELETE");if(r){(t=i.modalConfirmDelete)===null||t===void 0?void 0:t.open()}};this.confirmDeleteFieldHandler=function(){var e;i.isDeleting=true;i.fwDelete.emit({index:i.index});(e=i.modalConfirmDelete)===null||e===void 0?void 0:e.close()};this.dropdownChangeHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();i.isValuesChanged=true;var t=e.detail.type;switch(t){case"DELETE":i.errorType=!i.isDependentField&&!i.isNewField&&e.detail.errorType!==i18nText("errors.deleteDropDownChoice")?e.detail.errorType:"";i.validateDropdownErrors(e.detail.value);if(i.isDependentField){i.fieldBuilderOptions=deleteChoicesInFields(i,e)}break;case"VALUE_CHANGE":i.errorType=e.detail.errorType;i.validateDropdownErrors(e.detail.value);if(i.isDependentField){i.fieldBuilderOptions=updateChoicesInFields(i,e)}break;case"ADD":case"REPOSITION":i.errorType=e.detail.errorType;if(i.isDependentField){i.fieldBuilderOptions=updateChoicesInFields(i,e)}break;case"SELECT":i.dependentLevels=updateLevelSelection(i,e);break}};this.statusToggleHandler=function(e){i.isValuesChanged=true;var t=i.dataProvider;var r=e.target.id;var n=t.choices.find((function(e){return e.id===r}));n.choice_options.resolution_timer=e.detail.checked};this.lookupChangeHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();i.isValuesChanged=true;i.validateLookupErrors(e.detail.value)};this.checkboxSelectionChangeHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();i.isValuesChanged=true;if(!i.isPrimaryField&&e.detail.value==="unique"&&i.enableFilterable){var t=e.detail.meta.checked;try{var r=i.fieldBuilderOptions.checkboxes;var n=r.length;for(var o=0;o<n;o++){var a=r[o];if(a.key==="filterable"){a.selected=t;a.enabled=!t;a.disabledMessage="";//!objFilterable.enabled ? '' : '';
i.fieldBuilderOptions=Object.assign(Object.assign({},i.fieldBuilderOptions),{checkboxes:r});break}}}catch(l){console.error("Error occured in checkboxSelectionChangeHandler: ".concat(l))}}};this.handleDependentField=function(e){var t=e.target["value"];if(e.key==="Tab"){e.preventDefault();var r=e.target["selectionStart"];var n=e.target["selectionEnd"];e.target["value"]=t.substring(0,r)+"\t"+t.substring(n);e.target["selectionStart"]=r+1;e.target["selectionEnd"]=r+1}else{i.textboxDependentValue=t}};this.switchToDropdownView=function(){i.fieldBuilderOptions=buildChoicesFromText(i.textboxDependentValue,i.fieldBuilderOptions);i.showDependentFieldTextbox=false};this.performLabelChange=function(e,t,r){if(t===void 0){t=false}var n,o,a;if(e){e.stopImmediatePropagation();e.stopPropagation()}if(!t){i.isValuesChanged=true}var l=!t?((n=e===null||e===void 0?void 0:e.detail)===null||n===void 0?void 0:n.value)||"":((a=(o=e===null||e===void 0?void 0:e.target)===null||o===void 0?void 0:o["value"])===null||a===void 0?void 0:a.trim())||"";var d=l&&l!=="";var s="";var f=false;if(!i.isInternalNameEdited&&i.isNewField){s=deriveInternalNameFromLabel(l);f=true}if(d){var c=getMaxLimitProperty(i.productName,"maxLabelChars");if(c&&l.length>=c.count){i.labelWarningMessage=i18nText(c.message,{count:c.count})}else{i.labelWarningMessage=""}}else{i.labelWarningMessage=""}if(f){var u=getMaxLimitProperty(i.productName,"maxInternalNameChars");if(!i.internalNameWarningMessage&&i.internalNameWarningMessage!==""&&u&&s.length>=u.count){i.internalNameWarningMessage=i18nText(u.message,{count:u.count})}i.fieldBuilderOptions=updateFieldAttributes(i.fieldBuilderOptions,r,{label:l,name:s})}else{i.fieldBuilderOptions=updateFieldAttributes(i.fieldBuilderOptions,r,{label:l})}if(i.showErrors){i.validateLabelErrors(l)}};this.labelInputHandler=function(e,t){i.performLabelChange(e,false,t)};this.labelBlurHandler=function(e,t){i.performLabelChange(e,true,t)};this.performInternalNameChange=function(e,t,r){if(t===void 0){t=false}var n,o,a;if(e){e.stopImmediatePropagation();e.stopPropagation()}var l=!t?((n=e===null||e===void 0?void 0:e.detail)===null||n===void 0?void 0:n.value)||"":((a=(o=e===null||e===void 0?void 0:e.target)===null||o===void 0?void 0:o["value"])===null||a===void 0?void 0:a.trim())||"";var d=l&&l!=="";if(!t){i.isValuesChanged=true;if(d){l=l.trim()}}if(!i.isInternalNameEdited&&d){i.isInternalNameEdited=true}if(d){var s=getMaxLimitProperty(i.productName,"maxInternalNameChars");if(s&&l.length>=s.count){i.internalNameWarningMessage=i18nText(s.message,{count:s.count})}else{i.internalNameWarningMessage=""}i.fieldBuilderOptions=updateFieldAttributes(i.fieldBuilderOptions,r,{name:l})}else{i.internalNameWarningMessage=""}if(i.showErrors){i.validateInternalNameErrors(l)}};this.internalNameInputHandler=function(e,t){i.performInternalNameChange(e,false,t)};this.internalNameBlurHandler=function(e,t){i.performInternalNameChange(e,true,t)}}e.prototype.watchEnableUniqueChangeHandler=function(){this.setCheckboxesAvailability(this.fieldBuilderOptions)};e.prototype.watchEnableFilterableChangeHandler=function(){this.setCheckboxesAvailability(this.fieldBuilderOptions)};e.prototype.watchDataproviderChangeHandler=function(){this.isDeleting=false;this.isValuesChanged=false;this.isInternalNameEdited=false;this.oldFormValues=this.dataProvider?deepCloneObject(this.dataProvider):null;if(this.dataProvider){var e=this.dataProvider;this.isNewField=hasCustomProperty(e,"isNew")&&e["isNew"]===true?true:false;this.isDependentField=e.type==="DEPENDENT_FIELD";if(this.isNewField){this.isInternalNameEdited=false;this.showDependentFieldTextbox=this.isDependentField;this.setCheckboxesAvailability(deepCloneObject(this.dataProvider))}else{this.isInternalNameEdited=true;var i=deepCloneObject(this.defaultFieldTypeSchema);this.showDependentFieldTextbox=false;i.choices=hasCustomProperty(this.dataProvider,"choices")&&this.dataProvider.choices.length>0?deepCloneObject(this.dataProvider.choices):[];i.label=this.dataProvider.label||"";i.name=removeFirstOccurrence(this.dataProvider.name,this.internalNamePrefix)||"";if(this.isDependentField){i=Object.assign(Object.assign({},i),{fields:deepCloneObject(this.dataProvider.fields)})}this.setCheckboxesAvailability(i)}}else{this.isNewField=false;this.fieldBuilderOptions=null}};e.prototype.componentWillLoad=function(){var e=formMapper[this.productName];var i=e.config;this.internalNamePrefix=i.internalNamePrefix;this.watchDataproviderChangeHandler();this.dictInteractiveElements={}};e.prototype.renderFwLabel=function(e){if(!e.selected||e.key==="required"){return null}var i="fw-field-editor";var t=e.key;var r=hasCustomProperty(e,"tag")?i18nText(e.tag):t;return h("fw-label",{key:t,value:r,color:"grey",class:"".concat(i,"-content-fw-label")})};e.prototype.renderCheckboxField=function(e){var i=this;var t=this.isNewField||hasPermission(this.role,this.permission,"EDIT",true);var r=!t||!e.enabled;var n="fw-field-editor";var o=e.key;var a="";var l=false;if(hasCustomProperty(e,"disabledMessage")&&e.disabledMessage!==""){l=true;a=e.disabledMessage}else if(hasCustomProperty(e,"info")&&e.info!==""){l=true;a=i18nText(e.info)}return h("div",{class:"".concat(n,"-content-checkbox-container")},h("fw-checkbox",{class:"".concat(n,"-content-fw-checkbox"),ref:function(e){return i.dictInteractiveElements[o]=e},key:o,value:o,disabled:r,checked:e.selected,onFwChange:this.checkboxSelectionChangeHandler},i18nText(e.display_label)),l&&h("fw-tooltip",{placement:"right",trigger:"hover",content:a},h("fw-icon",{class:"".concat(n,"-content-fw-icon"),size:14,name:"info",color:"#264966"})))};e.prototype.renderDropdown=function(e,i,t,r){var n=this;if(i===void 0){i=null}if(t===void 0){t=[]}if(r===void 0){r=null}var o;var a=(o=i===null||i===void 0?void 0:i.field_options)===null||o===void 0?void 0:o.level;var l=this.isDependentField?"choices_level_".concat(a):"choices";var d=(i===null||i===void 0?void 0:i.choices)||this.fieldBuilderOptions.choices;var s=getDependentLevels(this.dependentLevels,d,t,a);var f=r?!!t.length:!!d.length;return h("fw-fb-field-dropdown",{ref:function(e){return n.dictInteractiveElements[l]=e},dataProvider:d,productName:this.productName,showErrors:this.showErrors,disabled:e,isDependentField:this.isDependentField,dependentLevels:s,level:a,parentId:r,choiceIds:t,enableKeyPress:f,onFwChange:this.dropdownChangeHandler})};e.prototype.renderStatusToggle=function(e){var i=this;var t="fw-field-editor";var r=e.choices;return h("div",{class:"".concat(t,"-status-toggle")},h("div",{class:"".concat(t,"-status-toggle-item header")},h("span",null,i18nText("fieldLabel")),h("span",null,i18nText("ertText"))),r.map((function(e){var r=null;if((e===null||e===void 0?void 0:e.choice_options)&&Object.keys(e===null||e===void 0?void 0:e.choice_options).length){r=h("span",null,h("fw-toggle",{id:e.id,size:"medium",checked:e===null||e===void 0?void 0:e.choice_options.resolution_timer,onFwChange:i.statusToggleHandler}))}return h("div",{class:"".concat(t,"-status-toggle-item")},h("span",null,h("div",{class:"".concat(t,"-input-container")},h("fw-input",{class:"".concat(t,"-content-required-input"),value:e.value,disabled:"true"}))),r)})))};e.prototype.renderLookup=function(e){var i=this;var t=this.dataProvider;return h("fw-fb-field-lookup",{ref:function(e){return i.dictInteractiveElements["relationship"]=e},targetObjects:this.lookupTargetObjects,sourceObjectName:this.entityName,showErrors:this.showErrors,disabled:e,onFwChange:this.lookupChangeHandler,formValues:t,productName:this.productName})};e.prototype.renderInternalName=function(e,i,t,r,n){var o=this;var a,l;var d=e.editInternalName;if(!d||!this.expanded){return null}var s="fw-field-editor";var f=n;var c=hasCustomProperty(f,"name")?f.name:"";var u=(a=n===null||n===void 0?void 0:n.field_options)===null||a===void 0?void 0:a.level;var p=!c;var b=this.isDependentField?"".concat(this.KEY_INTERNAL_NAME,"_level_").concat(u):this.KEY_INTERNAL_NAME;var m=this.showErrors&&p&&this.internalNameErrorMessage&&this.internalNameErrorMessage!==""?true:false;var x=m?this.internalNameErrorMessage:"";var g=!m&&this.internalNameWarningMessage&&this.internalNameWarningMessage!==""?true:false;var w=g?this.internalNameWarningMessage:"";var v=((l=i===null||i===void 0?void 0:i["maxInternalNameChars"])===null||l===void 0?void 0:l.count)||50;return h("div",{class:"".concat(s,"-internal-name-base")},h("label",{class:"".concat(s,"-internal-name-header-label required")},i18nText("internalName")),h("div",{class:"".concat(s,"-internal-name-container")},!t&&h("label",{class:"".concat(s,"-internal-name-prefix")},this.internalNamePrefix),h("fw-input",{ref:function(e){return o.dictInteractiveElements[b]=e},class:"".concat(s,"-content-required-internal-name-input"),placeholder:i18nText("fieldNamePlaceholder"),required:true,maxlength:v,value:c,errorText:x,warningText:w,disabled:!this.isNewField||!r,state:m?"error":g?"warning":"normal",onFwBlur:function(e){return o.internalNameBlurHandler(e,u)},onFwInput:function(e){return o.internalNameInputHandler(e,u)}})))};e.prototype.renderLabel=function(e,i,t,r){var n=this;var o,a;var l=r;var d="fw-field-editor";var s=hasCustomProperty(l,"label")?l.label:"";var f=i||!t;var c=this.isPrimaryField?i18nText("primaryFieldNameHint"):"";var u=(o=r===null||r===void 0?void 0:r.field_options)===null||o===void 0?void 0:o.level;var p=this.isDependentField?"name_level_".concat(u):"name";var b=!s||this.duplicateErrors;var m=this.showErrors&&b&&this.labelErrorMessage&&this.labelErrorMessage!==""?true:false;var x=!m&&this.labelWarningMessage&&this.labelWarningMessage!==""?true:false;var g=x?this.labelWarningMessage:"";var w=m?this.labelErrorMessage:"";var v=((a=e===null||e===void 0?void 0:e["maxLabelChars"])===null||a===void 0?void 0:a.count)||255;var y=this.isDependentField?i18nText("labelForLevel",{level:u}):i18nText("fieldLabel");return h("fw-input",{ref:function(e){return n.dictInteractiveElements[p]=e},class:"".concat(d,"-content-required-input"),placeholder:i18nText("fieldLabelPlaceholder"),label:y,required:true,maxlength:v,value:s,hintText:c,errorText:w,warningText:g,state:m?"error":x?"warning":"normal",disabled:f,onFwBlur:function(e){return n.labelBlurHandler(e,u)},onFwInput:function(e){return n.labelInputHandler(e,u)}})};e.prototype.renderFieldContent=function(e,i,t){var r=this;var n="fw-field-editor";var o=[];var a=[];var l=this.fieldBuilderOptions;var d=i||!t;var s=hasCustomProperty(l,"checkboxes")?l.checkboxes:null;var f=s&&s.length>0?s.map((function(e){return r.renderCheckboxField(e)})):null;var c=this.dependentLevels;var u=function(n,l,s){var f;var p=r.renderLabelAndInternalName(e,i,t,n);o.push(p);var h=getChildChoices(n,l,s,c),b=h.ids,m=h.choices,x=h.pId;if(!r.showDependentFieldTextbox){var g=r.renderDropdown(d,n,b,x);a.push(g)}if(((f=n===null||n===void 0?void 0:n.fields)===null||f===void 0?void 0:f.length)>0){var w=n.fields[0];var v=n.field_options.level;u(w,m,v)}};u(this.fieldBuilderOptions.fields[0],[],null);return h("div",{class:"".concat(n,"-content")},h("div",{class:"".concat(n,"-content-required")},h("div",{class:"".concat(n,"-content-checkboxes")},h("label",{class:"".concat(n,"-content-checkboxes-header-label")},i18nText("behaviour")),f),h("div",null,h("label",{class:"".concat(n,"-content-label")},i18nText("labels")),h("div",{class:"flex flex-space-between"},o.map((function(e){return e})))),h("div",null,h("label",{class:"".concat(n,"-content-label")},i18nText("dropdownChoices")),this.showDependentFieldTextbox?h("div",null,h("label",{class:"".concat(n,"-content-dependent-label")},i18nText("dependentDropdownMessage")),h("span",{class:"".concat(n,"-textbox")},h("textarea",{rows:8,value:this.textboxDependentValue,onKeyDown:this.handleDependentField})),h("fw-button",{size:"small",color:"secondary",onFwClick:this.switchToDropdownView},i18nText("addChoices"))):h("div",{class:"flex flex-space-between"},a.map((function(e){return e}))))))};e.prototype.renderLabelAndInternalName=function(e,i,t,r){var n=getMaximumLimitsConfig(this.productName);var o=e.editInternalName;var a="fw-field-editor";return h("div",{class:"".concat(a,"-content-label-interalName")},this.renderLabel(n,i,t,r),o&&this.renderInternalName(e,n,i,t,r))};e.prototype.renderContent=function(e,i,t){var r=this;if(!this.expanded){return null}var n=this.dataProvider;var o=getMaximumLimitsConfig(this.productName);var a=e.editInternalName;var l="fw-field-editor";var d=this.fieldBuilderOptions;var s=checkIfCustomToggleField(this.productName,n.name);var f=i||!t;var c=hasCustomProperty(d,"type")?d.type:"";var u=c==="DROPDOWN"||c==="MULTI_SELECT"?true:false;var p=false;if(hasCustomProperty(e,"dropdownFieldWithoutChoicesKey")&&e.dropdownFieldWithoutChoicesKey!==""){var b=getNestedKeyValueFromObject(n,e.dropdownFieldWithoutChoicesKey);if(b||b==="true"){p=true}}var m=hasCustomProperty(d,"checkboxes")?d.checkboxes:null;var x=m&&m.length>0?m.map((function(e){return r.renderCheckboxField(e)})):null;var g=c==="RELATIONSHIP";var w=g?this.renderLookup(f):null;var v=s?this.renderStatusToggle(n):null;var y=u&&!p?this.renderDropdown(f):null;return h("div",{class:"".concat(l,"-content")},h("div",{class:"".concat(l,"-content-required")},h("div",{class:"".concat(l,"-content-checkboxes")},h("label",{class:"".concat(l,"-content-checkboxes-header-label")},i18nText("behaviour")),x),g&&h("div",{class:"".concat(l,"-content-lookup")},w),this.renderLabel(o,i,t,this.fieldBuilderOptions),a&&this.renderInternalName(e,o,i,t,this.fieldBuilderOptions),v,u&&h("div",{class:"".concat(l,"-content-dropdown")},y)))};e.prototype.render=function(){var e=this;if(!this.dataProvider||!this.fieldBuilderOptions){return null}var i=formMapper[this.productName];var t=i.labels;var r=i.config;var n=this.fieldBuilderOptions;var o=this.dataProvider;var a=this.isNewField;var l=n.type;var d=(a||this.isValuesChanged)&&!this.showDependentFieldTextbox?true:false;var s=this.formErrorMessage&&this.formErrorMessage!==""?true:false;var f=!a&&hasCustomProperty(n,"required")?n.required:false;var c=(r===null||r===void 0?void 0:r.showDefaultTag)&&(r===null||r===void 0?void 0:r.defaultTagKey)&&r.defaultTagKey!==""&&hasCustomProperty(o,r.defaultTagKey)&&!o[r.defaultTagKey];var u=this.isNewField||hasPermission(this.role,this.permission,"EDIT");var p=hasPermission(this.role,this.permission,"DELETE");var b=!p;var m=r===null||r===void 0?void 0:r.showDeleteModalInlineMessage;var x=(r===null||r===void 0?void 0:r.showFieldLabelInDeleteModalTitle)?i18nText(t.deleteFieldModalHeader,{label:o===null||o===void 0?void 0:o.label}):i18nText(t.deleteFieldModalHeader);var g=i18nText(t.deleteFieldModalMessage);var w=m?i18nText("deleteFieldInlineMessage"):"";var v="";if(a){var y=i===null||i===void 0?void 0:i.fieldProps[l];var k=hasCustomProperty(y,"display_label")?y.display_label:"";v=this.isPrimaryField?i18nText("primaryFieldHeader"):k&&k!==""?i18nText(k):""}else{v=o.label}var E=!this.isPrimaryField||this.isPrimaryField&&!a?true:false;var F=a?i18nText("addFieldBtn"):i18nText("saveFieldBtn");var C=hasCustomProperty(n,"checkboxes")?n.checkboxes:null;var N=!this.expanded&&C&&C.length>0?C.map((function(i){return e.renderFwLabel(i)})):null;if(!this.expanded){if(this.isPrimaryField){var P=this.renderFwLabel({key:"primary",selected:true,tag:"primaryFieldTag"});if(!N){N=[P]}else{N.unshift(P)}}else if(l==="RELATIONSHIP"){var T=hasCustomProperty(n,"unique")?n.unique:false;if(T){var I=this.renderFwLabel({key:"unique",selected:true,tag:"lookupUniqueTag"});if(!N){N=[I]}else{N.push(I)}}}else if(c){var D=this.renderFwLabel({key:"customDefault",selected:true,tag:r.defaultTagLabel});if(!N){N=[D]}else{N.push(D)}}}var M="fw-field-editor";var z=M;if(f){z+=" ".concat(M,"--required")}if(this.isPrimaryField){z+=" ".concat(M,"--primary")}if(this.expanded){z+=" ".concat(M,"--expanded")}else if(this.disabled){z+=" ".concat(M,"--disabled")}else if(this.isDeleting){z+=" ".concat(M,"--deleting")}else if(this.disabledSort){z+=" ".concat(M,"--disabled-sort")}var L="".concat(M,"-footer");if(s){L+=" ".concat(M,"-footer-with-error")}var O=this.isDependentField?presetSchema.fieldTypes.DEPENDENT_FIELD.icon:n.icon;var _=this.isDependentField?this.renderFieldContent(r,c,u):this.renderContent(r,c,u);return h(Host,{tabIndex:"-1"},h("div",{class:z,ref:function(i){return e.divFieldBase=i},onDragEnd:this.stopParentDragging,onDrop:this.stopParentDragging},h("div",{class:"".concat(M,"-header")},h("div",{role:"none",class:"".concat(M,"-drag-container"),onMouseDown:this.startParentDragging},h("fw-icon",{size:14,name:"drag",color:"#CFD7DF"})),h("div",{class:"".concat(M,"-header-content"),onClick:this.expandHandler},h("span",{class:"".concat(M,"-icon-container"),style:{backgroundColor:O.bg_color}},h("fw-icon",{size:14,name:O.name,color:"#475867"})),h("label",{class:"".concat(M,"-label")},v),!this.expanded&&h("div",{class:"".concat(M,"-key-fw-labels")},N)),!this.expanded&&!this.isPrimaryField&&!this.isDeleting&&!c&&h("fw-button",{part:"delete-field-btn",size:"icon",color:"secondary",disabled:b,class:"".concat(M,"-delete-button"),onFwClick:this.deleteFieldClickHandler},h("fw-icon",{name:"delete"})),!this.expanded&&!this.isPrimaryField&&this.isDeleting&&h("fw-spinner",{class:"".concat(M,"-deleting-state"),size:"medium",color:"#d72d30"})),this.expanded&&h("div",{class:"".concat(M,"-body")},_,h("div",{class:L},s&&h("span",{class:"".concat(M,"-footer-field-error-container")},h("fw-icon",{size:12,name:"warning",color:"#d72d30"}),h("label",{class:"".concat(M,"-footer-field-error-msg")},this.formErrorMessage)),h("span",{class:"".concat(M,"-footer-buttons-container")},E&&h("fw-button",{id:"clearFieldBtn",color:"secondary",onFwClick:this.cancelFieldHandler},i18nText("cancelFieldBtn")),h("fw-button",{id:"submitFieldBtn",color:"primary",loading:this.isLoading,disabled:!d,onFwClick:this.addFieldHandler},F))))),h("fw-modal",{ref:function(i){return e.modalConfirmDelete=i},icon:"delete",submitColor:"danger",hasCloseIconButton:false,titleText:x,submitText:i18nText("deleteFieldSubmit"),onFwSubmit:this.confirmDeleteFieldHandler},h("span",{class:"fw-field-editor-delete-modal-content"},m&&h("fw-inline-message",{open:true,type:"warning"},w),g)))};Object.defineProperty(e.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{enableUnique:["watchEnableUniqueChangeHandler"],enableFilterable:["watchEnableFilterableChangeHandler"],dataProvider:["watchDataproviderChangeHandler"]}},enumerable:false,configurable:true});return e}();FieldEditor.style=fieldEditorCss;var fieldTypeMenuItemCss=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:inline-block}@media screen and (prefers-reduced-motion: reduce){.field-type-menu-item-add-button-container{-webkit-transition:none;transition:none}}.field-type-menu-item{width:100%;height:40px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;position:relative}.field-type-menu-item .field-type-menu-item-draggable-container{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:8px;outline:0;background-color:#fff;border:1px solid #ebeff3;-webkit-box-shadow:0px 2px 4px rgba(18, 52, 77, 0.06);box-shadow:0px 2px 4px rgba(18, 52, 77, 0.06);border-radius:4px;cursor:move;cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.field-type-menu-item .field-type-menu-item-icon-container{width:24px;height:24px;-webkit-margin-end:8px;margin-inline-end:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-radius:4px}.field-type-menu-item .field-type-menu-item-label{max-width:calc(100% - 24px - 24px - 8px);width:auto;margin:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-size:14px;font-weight:400;word-break:break-word;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.field-type-menu-item .field-type-menu-item-add-button-container{width:24px;height:24px;position:absolute;inset-inline-end:4px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-webkit-transition:opacity 0.3s;transition:opacity 0.3s;cursor:pointer;opacity:0}.field-type-menu-item:hover .field-type-menu-item-add-button-container{opacity:1}.field-type-menu-item:focus .field-type-menu-item-add-button-container{opacity:1}.field-type-menu-item--dragging{border-radius:50%}.field-type-menu-item--dragging .field-type-menu-item-add-button-container{opacity:0}.field-type-menu-item--disabled{cursor:not-allowed;opacity:0.6}.field-type-menu-item--disabled .field-type-menu-item-draggable-container{cursor:not-allowed;pointer-events:none}.field-type-menu-item--disabled .field-type-menu-item-add-button-container{cursor:not-allowed;pointer-events:none}.field-type-menu-item--disabled:hover .field-type-menu-item-add-button-container,.field-type-menu-item--disabled:focus .field-type-menu-item-add-button-container{opacity:0}';var FieldTypeMenuItem=function(){function e(e){var i=this;registerInstance(this,e);this.fwAddClick=createEvent(this,"fwAddClick",7);this.disabled=false;this.index=-1;this.dataProvider=null;this.value="";this.label="";this.tooltip="";this.iconBackgroundColor="#ebeff3";this.iconName="";this.name="";this.addButtonClickHandler=function(){i.fwAddClick.emit({value:i.value,data:i.dataProvider,index:i.index})}}e.prototype.render=function(){var e="field-type-menu-item";var i=e;if(this.disabled){i+=" ".concat(e,"--disabled")}return h(Host,{tabIndex:"-1"},h("fw-tooltip",{placement:"right",trigger:"hover",content:this.tooltip},h("div",{class:i},h("div",{class:"".concat(e,"-draggable-container"),draggable:true},h("span",{class:"".concat(e,"-icon-container"),style:{backgroundColor:this.iconBackgroundColor}},h("fw-icon",{size:14,name:this.iconName,color:"#475867"})),h("label",{class:"".concat(e,"-label")},i18nText(this.label))),h("span",{class:"".concat(e,"-add-button-container"),onClick:this.addButtonClickHandler},h("fw-icon",{size:10,name:"plus",color:"#12344D"})))))};Object.defineProperty(e.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();FieldTypeMenuItem.style=fieldTypeMenuItemCss;var widgetCustomizeFieldItemCss=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;width:100%;height:auto}.widget-customize-field-item{width:100%;height:100%;padding-inline:12px;padding-block:8px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;background-color:#fff;border:1px solid #cfd7df;border-radius:4px}.widget-customize-field-item .widget-customize-field-item-icon-container{width:24px;height:24px;-webkit-margin-end:8px;margin-inline-end:8px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;border-radius:4px}.widget-customize-field-item .widget-customize-field-item-checkbox{width:100%;max-width:100%;word-wrap:break-word;word-break:break-word;white-space:normal}.widget-customize-field-item--disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:not-allowed}';var WidgetCustomizeFieldItem=function(){function e(e){var i=this;registerInstance(this,e);this.fwCheck=createEvent(this,"fwCheck",7);this.disabled=false;this.selected=false;this.index=-1;this.dataProvider=null;this.label="";this.isPrimaryField=false;this.name="";this.checkboxSelectionChangeHandler=function(e){var t,r;e.stopImmediatePropagation();e.stopPropagation();i.selected=(r=(t=e.detail)===null||t===void 0?void 0:t.meta)===null||r===void 0?void 0:r.checked;i.fwCheck.emit({checked:i.selected,data:i.dataProvider,index:i.index})}}e.prototype.render=function(){if(!this.dataProvider){return null}var e="widget-customize-field-item";var i=e;if(this.disabled){i+=" ".concat(e,"--disabled")}return h(Host,{tabIndex:"-1"},h("div",{class:i},h("fw-checkbox",{class:"".concat(e,"-checkbox"),checked:this.selected,disabled:this.disabled,value:this.dataProvider.name,onFwChange:this.checkboxSelectionChangeHandler},this.label)))};Object.defineProperty(e.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});return e}();WidgetCustomizeFieldItem.style=widgetCustomizeFieldItemCss;export{FieldEditor as fw_field_editor,FieldTypeMenuItem as fw_field_type_menu_item,WidgetCustomizeFieldItem as fw_widget_customize_field_item};