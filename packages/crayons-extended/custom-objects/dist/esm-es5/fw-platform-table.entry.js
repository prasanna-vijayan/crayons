var __awaiter=this&&this.__awaiter||function(t,e,o,r){function i(t){return t instanceof o?t:new o((function(e){e(t)}))}return new(o||(o=Promise))((function(o,a){function n(t){try{l(r.next(t))}catch(e){a(e)}}function s(t){try{l(r["throw"](t))}catch(e){a(e)}}function l(t){t.done?o(t.value):i(t.value).then(n,s)}l((r=r.apply(t,e||[])).next())}))};var __generator=this&&this.__generator||function(t,e){var o={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,n;return n={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(n[Symbol.iterator]=function(){return this}),n;function s(t){return function(e){return l([t,e])}}function l(n){if(r)throw new TypeError("Generator is already executing.");while(o)try{if(r=1,i&&(a=n[0]&2?i["return"]:n[0]?i["throw"]||((a=i["return"])&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;if(i=0,a)n=[n[0]&2,a.value];switch(n[0]){case 0:case 1:a=n;break;case 4:o.label++;return{value:n[1],done:false};case 5:o.label++;i=n[1];n=[0];continue;case 7:n=o.ops.pop();o.trys.pop();continue;default:if(!(a=o.trys,a=a.length>0&&a[a.length-1])&&(n[0]===6||n[0]===2)){o=0;continue}if(n[0]===3&&(!a||n[1]>a[0]&&n[1]<a[3])){o.label=n[1];break}if(n[0]===6&&o.label<a[1]){o.label=a[1];a=n;break}if(a&&o.label<a[2]){o.label=a[2];o.ops.push(n);break}if(a[2])o.ops.pop();o.trys.pop();continue}n=e.call(t,o)}catch(s){n=[6,s];i=0}finally{r=a=0}if(n[0]&5)throw n[1];return{value:n[0]?n[1]:void 0,done:true}}};import{r as registerInstance,c as createEvent,h,F as Fragment,g as getElement}from"./index-f435cf58.js";import{T as TranslationController}from"./Translation-7ee0e3b3.js";import"./index-fb937839.js";var platformTableCss=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}.toolbar{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;-webkit-margin-after:8px;margin-block-end:8px;-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-after:12px;padding-block-end:12px;-webkit-padding-end:16px;padding-inline-end:16px;-webkit-padding-before:12px;padding-block-start:12px;background:#ffffff;border:1px solid rgba(207, 215, 223, 0.4);-webkit-box-shadow:0px 1px 4px rgba(18, 52, 77, 0.16);box-shadow:0px 1px 4px rgba(18, 52, 77, 0.16);-webkit-box-sizing:border-box;box-sizing:border-box;border-radius:4px}.toolbar .action-items{-webkit-margin-start:12px;margin-inline-start:12px}.toolbar .sort-label{font-size:14px;-webkit-margin-start:16px;margin-inline-start:16px;color:#465789;font-weight:400}.toolbar #selectAll{width:16px}.toolbar-suffix,.toolbar-prefix{-ms-flex:0 0 auto;flex:0 0 auto;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.toolbar-suffix ::slotted(*),.toolbar-prefix ::slotted(*){-webkit-margin-start:8px;margin-inline-start:8px}.table{height:var(--fw-platform-table-width, 100%);width:var(--fw-platform-table-height, 100%);border:1px solid rgba(207, 215, 223, 0.4);border-end-start-radius:0px;border-end-end-radius:0px;border-start-end-radius:4px;border-start-start-radius:4px;-webkit-box-shadow:0px 1px 4px rgba(18, 52, 77, 0.16);box-shadow:0px 1px 4px rgba(18, 52, 77, 0.16)}';var PlatformTable=function(){function t(t){registerInstance(this,t);this.fwDelete=createEvent(this,"fwDelete",7);this.fwPagination=createEvent(this,"fwPagination",7);this.orderByData=[];this.showDelete=false;this.checkAll=false;this.selectedRows=[];this.tableProps={};this.paginationProps={};this.customStyles={};this.tableWidth=null;this.tableHeight=null;this.loading=false;this.showError=false;this.sortableColumns={};this.isSelectable=true}t.prototype.onLoadingChange=function(t){if(this.showError)return;this.table.loadTable(t)};t.prototype.onTableSelectionChange=function(t){var e=t.detail.selected;this.setSelectedRow(e)};t.prototype.onChange=function(t){var e=this;var o,r;if(t.composedPath()[0].tagName==="FW-PAGINATION"){this.clearTableSelection();this.fwPagination.emit(t.detail)}else if(t.composedPath()[0].id==="selectAll"){this.table.selectAllRows((r=(o=t.detail)===null||o===void 0?void 0:o.meta)===null||r===void 0?void 0:r.checked).then((function(t){e.checkAll=true;e.setSelectedRow(t,true)}))}t.stopImmediatePropagation();t.stopPropagation();t.preventDefault()};Object.defineProperty(t.prototype,"style",{get:function(){var t={width:null,height:null};if(this.tableWidth){t.width=this.tableWidth}if(this.tableHeight){t.height=this.tableHeight}var e=typeof this.customStyles==="object"?this.customStyles:{};return Object.assign(Object.assign({},t),e)},enumerable:false,configurable:true});t.prototype.clearTableSelection=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){if(this.showError)return[2];this.table.selectAllRows(false);this.setSelectedRow([]);return[2]}))}))};t.prototype.setSelectedRow=function(t,e){var o=this;if(e===void 0){e=false}this.selectedRows=t.length>0?t:[];this.showDelete=this.selectedRows.length>0?true:false;if(!e){this.checkAll=this.tableProps["rows"].length>0&&this.tableProps["rows"].length===this.selectedRows.length&&this.tableProps["rows"].every((function(t){return o.selectedRows.includes(t.id)}))}};t.prototype.setSortableColumns=function(t){this.orderByData=Object.keys(t).map((function(e){return Object.assign(Object.assign({},t[e]),{value:e})}))};t.prototype.onDelete=function(){this.fwDelete.emit({selectedRows:this.selectedRows})};t.prototype.renderDeleteButton=function(){return h("fw-button",{class:"action-items",color:"secondary",onClick:this.onDelete.bind(this)},h("fw-icon",{slot:"before-label",name:"delete"}),h("span",null,TranslationController.t("platformTable.delete")))};t.prototype.renderSort=function(){return h(Fragment,null,h("label",{class:"sort-label"},TranslationController.t("platformTable.sortby"),":"),h("fw-sort-select",{class:"sort",orderBy:this.orderBy,order:this.order,sortOptions:this.orderByData}))};t.prototype.componentWillLoad=function(){this.defaultProps=this.host.id?{id:"platform-".concat(this.host.id)}:{};this.setSortableColumns(this.sortableColumns)};t.prototype.componentDidLoad=function(){this.loading&&this.onLoadingChange(this.loading)};t.prototype.render=function(){var t=this;return h(Fragment,null,h("div",{class:"toolbar"},h("span",{class:"toolbar-prefix"},this.isSelectable&&h("fw-checkbox",{id:"selectAll",disabled:this.showError,checked:this.checkAll}),this.showDelete?this.renderDeleteButton():this.renderSort()),h("span",{class:"toolbar-suffix"},h("slot",{name:"toolbar-before"}),h("fw-pagination",Object.assign({},this.paginationProps)),h("slot",{name:"toolbar-after"}))),this.showError?h("slot",{name:"error-state"}):h("fw-data-table",Object.assign({style:this.style},this.defaultProps,this.tableProps,{class:"table",ref:function(e){t.table=e},isSelectable:this.isSelectable})))};Object.defineProperty(t.prototype,"host",{get:function(){return getElement(this)},enumerable:false,configurable:true});Object.defineProperty(t,"watchers",{get:function(){return{loading:["onLoadingChange"]}},enumerable:false,configurable:true});return t}();PlatformTable.style=platformTableCss;export{PlatformTable as fw_platform_table};