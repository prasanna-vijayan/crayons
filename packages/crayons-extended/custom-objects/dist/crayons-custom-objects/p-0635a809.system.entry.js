var __awaiter=this&&this.__awaiter||function(e,i,t,r){function l(e){return e instanceof t?e:new t((function(i){i(e)}))}return new(t||(t=Promise))((function(t,n){function a(e){try{d(r.next(e))}catch(i){n(i)}}function o(e){try{d(r["throw"](e))}catch(i){n(i)}}function d(e){e.done?t(e.value):l(e.value).then(a,o)}d((r=r.apply(e,i||[])).next())}))};var __generator=this&&this.__generator||function(e,i){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,l,n,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(e){return function(i){return d([e,i])}}function d(a){if(r)throw new TypeError("Generator is already executing.");while(t)try{if(r=1,l&&(n=a[0]&2?l["return"]:a[0]?l["throw"]||((n=l["return"])&&n.call(l),0):l.next)&&!(n=n.call(l,a[1])).done)return n;if(l=0,n)a=[a[0]&2,n.value];switch(a[0]){case 0:case 1:n=a;break;case 4:t.label++;return{value:a[1],done:false};case 5:t.label++;l=a[1];a=[0];continue;case 7:a=t.ops.pop();t.trys.pop();continue;default:if(!(n=t.trys,n=n.length>0&&n[n.length-1])&&(a[0]===6||a[0]===2)){t=0;continue}if(a[0]===3&&(!n||a[1]>n[0]&&a[1]<n[3])){t.label=a[1];break}if(a[0]===6&&t.label<n[1]){t.label=n[1];n=a;break}if(n&&t.label<n[2]){t.label=n[2];t.ops.push(a);break}if(n[2])t.ops.pop();t.trys.pop();continue}a=i.call(e,t)}catch(o){a=[6,o];l=0}finally{r=n=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};var __spreadArray=this&&this.__spreadArray||function(e,i,t){if(t||arguments.length===2)for(var r=0,l=i.length,n;r<l;r++){if(n||!(r in i)){if(!n)n=Array.prototype.slice.call(i,0,r);n[r]=i[r]}}return e.concat(n||Array.prototype.slice.call(i))};System.register(["./p-17854542.system.js","./p-f5745e7b.system.js","./p-4fc2ed1c.system.js","./p-81fe435d.system.js","./p-07a9c0ce.system.js","./p-a69cb9a8.system.js"],(function(e){"use strict";var i,t,r,l,n,a,o,d,s,f,c,p,u,b,h,m,g,x,v;return{setters:[function(e){i=e.r;t=e.c;r=e.h;l=e.F;n=e.i;a=e.g},function(e){o=e.i;d=e.d;s=e.g;f=e.a;c=e.b;p=e.h;u=e.c;b=e.e;h=e.f;m=e.j;g=e.k},function(e){x=e.p},function(e){v=e.d},function(){},function(){}],execute:function(){var w=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:inline-block;width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.form-builder{width:100%;height:100%;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;background-color:#fff;overflow:hidden;position:relative;--fw-warning-color:#f48928}.form-builder .form-builder-left-panel{height:100%;width:30%;min-width:200px;max-width:350px;padding-inline:20px;padding-block:24px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;overflow-y:auto;background:#f5f7f9;-webkit-border-end:1px solid #ebeff3;border-inline-end:1px solid #ebeff3}.form-builder .form-builder-left-panel .form-builder-left-panel-header{width:100%;height:auto;margin:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.form-builder .form-builder-left-panel .form-builder-left-panel-product-header-label{width:100%;margin:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-size:20px;font-weight:700;line-height:28px;height:28px}.form-builder .form-builder-left-panel .form-builder-left-panel-header-label{width:100%;margin:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-size:18px;font-weight:700;line-height:28px;height:28px}.form-builder .form-builder-left-panel .form-builder-left-panel-header-desc{width:100%;margin:0;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#475867;font-size:12px;font-weight:400;line-height:18px}.form-builder .form-builder-left-panel .form-builder-left-panel-sub-header-description{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-padding-after:0;padding-block-end:0;padding-inline:2px;-webkit-padding-before:2px;padding-block-start:2px;-webkit-margin-after:8px;margin-block-end:8px}.form-builder .form-builder-left-panel .form-builder-left-panel-sub-header-description .form-builder-left-panel-sub-header-description-label{width:100%;-webkit-margin-after:0;margin-block-end:0;margin-inline:0;-webkit-margin-before:-2px;margin-block-start:-2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#475867;font-size:14px;font-weight:400;line-height:18px}.form-builder .form-builder-left-panel .form-builder-left-panel-sub-header-description .form-builder-left-panel-sub-header-description-link-anchor{-webkit-margin-start:0px;margin-inline-start:0px;-webkit-margin-after:0;margin-block-end:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-margin-before:-2px;margin-block-start:-2px;text-align:start;display:inline-block;font-size:14px;color:#2c5cc5;font-weight:400;text-decoration:none;word-wrap:break-word;word-break:break-word;white-space:normal}.form-builder .form-builder-left-panel .form-builder-left-panel-header-desc-wo-header{width:100%;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-after:0;margin-block-end:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-margin-before:16px;margin-block-start:16px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-size:16px;font-weight:600;line-height:24px;height:24px}.form-builder .form-builder-left-panel .form-builder-left-panel-list-disabled-div{width:calc(100% + 40px);height:calc(100% + 40px);padding-inline:20px;padding-block:40px;position:absolute;inset-inline-start:-20px;inset-block-end:-4px;z-index:2;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:end;justify-content:flex-end}:host(:not([dir="rtl"])) .form-builder .form-builder-left-panel .form-builder-left-panel-list-disabled-div,:host([dir="ltr"]) .form-builder .form-builder-left-panel .form-builder-left-panel-list-disabled-div{background-image:-webkit-gradient(linear, left top, left bottom, color-stop(35%, rgba(245, 247, 249, 0.6)), color-stop(40%, rgba(245, 247, 249, 0.93)), to(#f5f7f9));background-image:linear-gradient(180deg, rgba(245, 247, 249, 0.6) 35%, rgba(245, 247, 249, 0.93) 40% 60%, #f5f7f9 100%)}:host([dir="rtl"]) .form-builder .form-builder-left-panel .form-builder-left-panel-list-disabled-div{background-image:-webkit-gradient(linear, left top, left bottom, color-stop(35%, rgba(245, 247, 249, 0.6)), color-stop(40%, rgba(245, 247, 249, 0.93)), to(#f5f7f9));background-image:linear-gradient(-180deg, rgba(245, 247, 249, 0.6) 35%, rgba(245, 247, 249, 0.93) 40% 60%, #f5f7f9 100%)}.form-builder .form-builder-left-panel .form-builder-left-panel-list-disabled-div .form-builder-left-panel-list-disabled-header{width:100%;-webkit-margin-after:0;margin-block-end:0;margin-inline:0;-webkit-margin-before:24px;margin-block-start:24px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-size:16px;font-weight:600;line-height:24px}.form-builder .form-builder-left-panel .form-builder-left-panel-list-disabled-div .form-builder-left-panel-list-disabled-message{width:100%;-webkit-margin-after:0;margin-block-end:0;margin-inline:0;-webkit-margin-before:4px;margin-block-start:4px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#7b8e9f;font-size:14px;font-weight:400;line-height:20px}.form-builder .form-builder-left-panel .form-builder-left-panel-list-disabled-div .form-builder-left-panel-list-disabled-button{-webkit-margin-before:20px;margin-block-start:20px;width:-webkit-max-content;width:-moz-max-content;width:max-content}.form-builder .form-builder-left-panel .form-builder-left-panel-list-container{width:100%;height:auto;-webkit-margin-before:16px;margin-block-start:16px;-webkit-box-sizing:border-box;box-sizing:border-box;position:relative}.form-builder .form-builder-left-panel .form-builder-left-panel-list-container .form-builder-left-panel-field-types-list{width:100%;height:auto;gap:10px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.form-builder .form-builder-left-panel .form-builder-left-panel-list-container .form-builder-left-panel-field-types-list .field-type-menu-description{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-padding-after:0;padding-block-end:0;padding-inline:2px;-webkit-padding-before:2px;padding-block-start:2px}.form-builder .form-builder-left-panel .form-builder-left-panel-list-container .form-builder-left-panel-field-types-list .field-type-menu-description .field-type-menu-description-label{width:100%;-webkit-margin-after:0;margin-block-end:0;margin-inline:0;-webkit-margin-before:-2px;margin-block-start:-2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#475867;font-size:12px;font-weight:400}.form-builder .form-builder-left-panel .form-builder-left-panel-list-container .form-builder-left-panel-field-types-list .field-type-menu-description .field-type-menu-description-link-anchor{-webkit-margin-start:4px;margin-inline-start:4px;-webkit-margin-after:0;margin-block-end:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-margin-before:-2px;margin-block-start:-2px;text-align:start;display:inline-block;font-size:12px;color:#2c5cc5;font-weight:400;text-decoration:none;word-wrap:break-word;word-break:break-word;white-space:normal}.form-builder .form-builder-left-panel .form-builder-left-panel-list-container .form-builder-left-panel-field-types-list .field-type-menu-description .field-type-menu-help-fw-icon{-webkit-margin-start:4px;margin-inline-start:4px;vertical-align:middle}.form-builder .form-builder-left-panel .form-builder-left-panel-list-container .form-builder-left-panel-field-types-list .field-type-menu-item-bottom-border{width:100%;height:1px;-webkit-margin-before:2px;margin-block-start:2px;border-width:0;background-color:#cfd7df}.form-builder .form-builder-left-panel--disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:not-allowed;opacity:0.6}.form-builder .form-builder-right-panel{width:70%;padding:0;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:stretch;align-items:stretch;background:#fff}.form-builder .form-builder-right-panel .form-builder-right-panel-header{width:100%;height:64px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-webkit-margin-after:20px;margin-block-end:20px;-webkit-padding-start:32px;padding-inline-start:32px;-webkit-padding-end:32px;padding-inline-end:32px}.form-builder .form-builder-right-panel .form-builder-right-panel-header .form-builder-right-panel-header-content{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;max-width:990px}.form-builder .form-builder-right-panel .form-builder-right-panel-header .form-builder-right-panel-header-content .form-builder-right-panel-header-label{width:auto;margin:0;-webkit-margin-start:2px;margin-inline-start:2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-size:16px;font-weight:700;line-height:28px;height:28px}.form-builder .form-builder-right-panel .form-builder-right-panel-header .form-builder-right-panel-header-content .form-builder-right-panel-header-right-filter-by-div{width:40%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;gap:4px}.form-builder .form-builder-right-panel .form-builder-right-panel-header .form-builder-right-panel-header-content .form-builder-right-panel-header-right-filter-by-div .form-builder-right-panel-header-filter-label{width:auto;margin:0;-webkit-margin-start:2px;margin-inline-start:2px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#92a2b1;font-size:14px;font-weight:400;line-height:20px;height:20px}.form-builder .form-builder-right-panel .form-builder-right-panel-header .form-builder-right-panel-header-content .form-builder-right-panel-header-right-filter-by-div .form-builder-filter-by-field-type-select{width:230px}.form-builder .form-builder-right-panel .form-builder-right-panel-header .form-builder-right-panel-header-content .form-builder-right-panel-header-right-div{width:80%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:end;justify-content:flex-end;gap:20px}.form-builder .form-builder-right-panel .form-builder-right-panel-header .form-builder-right-panel-header-content .form-builder-right-panel-header-right-div .form-builder-right-panel-header-search-input{max-width:344px;width:calc(100% - 250px)}.form-builder .form-builder-right-panel .form-builder-right-panel-header--disabled{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:not-allowed;opacity:0.6}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container{width:100%;height:calc(100% - 64px - 20px);padding-block:4px 32px;padding-inline:32px 32px;-webkit-box-sizing:border-box;box-sizing:border-box;overflow-y:auto}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container .form-builder-right-panel-empty-list-div{width:100%;height:100%;-webkit-padding-before:60px;padding-block-start:60px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:start;align-items:flex-start;-ms-flex-pack:center;justify-content:center}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container .form-builder-right-panel-empty-list-div .form-builder-right-panel-empty-list-content{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;-ms-flex-direction:column;flex-direction:column}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container .form-builder-right-panel-empty-list-div .form-builder-right-panel-empty-list-content .form-builder-right-panel-empty-list-image-span{width:86px;height:86px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;background-color:#eff2fd;border-radius:50%}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container .form-builder-right-panel-empty-list-div .form-builder-right-panel-empty-list-content .form-builder-right-panel-empty-list-image-span .form-builder-right-panel-empty-list-image{max-width:85%;max-height:85%;-o-object-fit:contain;object-fit:contain;pointer-events:none}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container .form-builder-right-panel-empty-list-div .form-builder-right-panel-empty-list-content .form-builder-right-panel-empty-search-message{width:100%;margin-inline:0;margin-block:16px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center;color:#12344d;font-size:18px;font-weight:700;line-height:24px}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container .form-builder-right-panel-field-editor-list{width:100%;min-height:100%;height:auto;gap:10px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.form-builder .form-builder-right-panel .form-builder-right-panel-list-container--reordering .form-builder-right-panel-field-editor-list fw-field-editor::part(delete-field-btn){-webkit-transition:none !important;transition:none !important;opacity:0 !important}.cusomize-widget-list{width:100%;min-height:100%;height:auto;gap:10px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox !important;display:flex !important;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center}.cusomize-widget-header{width:100%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}.cusomize-widget-header .cusomize-widget-title{font-size:18px;font-weight:600;line-height:24px}.cusomize-widget-header .cusomize-widget-description{font-size:14px;font-weight:400;color:#475867;line-height:20px;padding-inline:0px;padding-block:6px}.cusomize-widget-modal-footer{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;gap:12px}';var y=e("fw_form_builder",function(){function e(e){var r=this;i(this,e);this.fwSaveField=t(this,"fwSaveField",7);this.fwDeleteField=t(this,"fwDeleteField",7);this.fwComposeNewField=t(this,"fwComposeNewField",7);this.fwRepositionField=t(this,"fwRepositionField",7);this.fwExpandField=t(this,"fwExpandField",7);this.fwExplorePlan=t(this,"fwExplorePlan",7);this.fwSearchField=t(this,"fwSearchField",7);this.fwSaveWidgetFields=t(this,"fwSaveWidgetFields",7);this.isWidgetValuesChanged=false;this.filterByFieldTypeOptions=null;this.FILTER_ALL_FIELDS="ALL_FIELDS";this.productName="CUSTOM_OBJECTS";this.role="admin";this.permission={view:true,create:true,edit:true,delete:true};this.expandedFieldIndex=-1;this.formValues=null;this.lookupTargetObjects=null;this.showLookupField=true;this.showDependentField=true;this.customizeWidgetFields=null;this.isLoading=false;this.isSavingCustomizeWidget=false;this.userPlan="admin";this.emptySearchImage=null;this.localFormValues=null;this.arrWidgetFields=null;this.arrSearchedFields=null;this.arrFilteredByTypeFields=null;this.searching=false;this.showCustomizeWidget=false;this.fieldTypesCount=null;this.enableFieldType=true;this.enableFilterable=true;this.enableUnique=true;this.selectedFieldTypeFilterOption=this.FILTER_ALL_FIELDS;this.fieldRerenderCount=0;this.getInterpolatedMaxLimitLabel=function(e){var i;if(e&&e!==""){try{var t=(i=c(r.productName))===null||i===void 0?void 0:i[e];if(t){return o(t.message,{count:t.count})}}catch(l){return""}}return""};this.getDefaultFieldTypeSchema=function(e){if(x){try{var i=x.fieldTypes[e];if(i){var t=d(i);t.checkboxes=s(r.productName,e);return t}else{console.log("".concat(e," - field type is not supported"))}}catch(l){console.log("".concat(e," - field type is not supported"))}}return null};this.removeFieldReorderClass=function(){try{if(r.fieldEditorPanel){r.fieldEditorPanel.classList.remove("form-builder-right-panel-list-container--reordering")}}catch(e){console.error("Could not remove dragged class")}};this.reorderFieldProgressHandler=function(e){if(r.fieldEditorPanel){var i=e.detail.value;if(i){r.fieldEditorPanel.classList.add("form-builder-right-panel-list-container--reordering")}else{r.removeFieldReorderClass()}}};this.expandFieldHandler=function(e){r.fwExpandField.emit(Object.assign({},e.detail))};this.explorePlanHandler=function(e){r.fwExplorePlan.emit(Object.assign({},e.detail))};this.saveFieldHandler=function(e){var i=Object.assign({},e.detail);var t=i.value;t.type=f(r.productName,t.type);r.fwSaveField.emit(i)};this.deleteFieldHandler=function(e){r.fwDeleteField.emit(Object.assign({},e.detail))};this.composeNewField=function(e,i,t){if(t===void 0){t=-1}var l;var n=e;var a=d(x.fieldTypes[n]);var o=c(r.productName);try{var p=(l=r.localFormValues)===null||l===void 0?void 0:l.fields;a.checkboxes=s(r.productName,a.type);if(a.type!=="RELATIONSHIP"&&a.checkboxes&&a.checkboxes.length>0&&o){var u=p.filter((function(e){return(e===null||e===void 0?void 0:e.filterable)===true||(e===null||e===void 0?void 0:e.filterable)==="true"}));var b=o.filterable.count;if(u.length>=b){var h=a.checkboxes;var m=h.length;for(var g=0;g<m;g++){if(h[g].key==="filterable"){h[g].selected=false;break}}}}}catch(v){console.error("Error occurred in composeNewField: ".concat(v))}a.type=f(r.productName,a.type);r.fwComposeNewField.emit({maximumLimits:c(r.productName),fieldSchema:a,value:Object.assign({},i),index:t})};this.fieldTypeDropHandler=function(e){r.removeFieldReorderClass();var i=e.detail;var t=i.droppedElement;var l=i.droppedIndex;if(i.dragFromId!==i.dropToId){var n=p(r.role,r.permission,"CREATE");if(!n){return}r.composeNewField(t.dataProvider.type,Object.assign({},t.dataProvider),l)}else{if(t.index!==l){r.fwRepositionField.emit({sourceIndex:t.index,targetIndex:l})}}};this.removeResizeObserver=function(){if(r.resizeObserver){r.resizeObserver.disconnect();r.resizeObserver=null}};this.addNewFieldTypeHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();var i=p(r.role,r.permission,"CREATE");if(!i){return}r.resizeObserver=new ResizeObserver((function(){r.removeResizeObserver();setTimeout((function(){r.fieldEditorPanel.scrollTop=r.fieldEditorPanel.scrollHeight}),100)}));r.resizeObserver.observe(r.fieldEditorPanel);r.composeNewField(e.detail.value,Object.assign({},e.detail.data))};this.initializeSearchDebounce=function(){if(!r.debouncedHandleInput){r.debouncedHandleInput=v(r.searchChangeHandler,r)}};this.searchChangeHandler=function(e){var i,t;e.stopImmediatePropagation();e.stopPropagation();var l=((t=(i=e===null||e===void 0?void 0:e.detail)===null||i===void 0?void 0:i.value)===null||t===void 0?void 0:t.trim())||"";if(l){var n=r.localFormValues&&r.localFormValues.fields?r.localFormValues.fields:[];if(n&&n.length>0){var a=l.toLowerCase();var o=n.filter((function(e){return e.label.toLowerCase().indexOf(a)!==-1}));r.searching=true;r.arrSearchedFields=d(o);return}}r.searching=false;r.arrSearchedFields=null};this.clearSearchHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();r.arrSearchedFields=null;r.searching=false};this.fieldTypeFilterChangeHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();var i=e.detail.value;if(i&&i!==""&&i!==r.FILTER_ALL_FIELDS){r.arrSearchedFields=null;r.searching=false;var t=r.localFormValues&&r.localFormValues.fields?r.localFormValues.fields:[];if(t&&t.length>0){var l=t.filter((function(e){return e.type.indexOf(i)!==-1}));r.arrFilteredByTypeFields=d(l);r.selectedFieldTypeFilterOption=i;return}}r.arrFilteredByTypeFields=null;r.selectedFieldTypeFilterOption=r.FILTER_ALL_FIELDS};this.openCustomizeWidgetModalHandler=function(e){var i,t;e.stopImmediatePropagation();e.stopPropagation();if(!r.localFormValues||!r.localFormValues.fields||r.localFormValues.fields.length<=0){return}var l=r.localFormValues.fields;var n=r.customizeWidgetFields?__spreadArray([],r.customizeWidgetFields,true):[];var a=[];if((n===null||n===void 0?void 0:n.length)>1){r.isWidgetValuesChanged=false;var o=n.length;for(var d=0;d<o;d++){a=__spreadArray(__spreadArray([],a,true),[n[d]],false)}}else{if(n&&n.length===1&&u(n[0],r.productName)){a=__spreadArray(__spreadArray([],a,true),[n[0]],false)}var s=c(r.productName);var f=((i=s===null||s===void 0?void 0:s.widgets)===null||i===void 0?void 0:i.count)||0;var p=l.length;for(var b=0;b<p;b++){if(!a.includes(l[b].id)){a=__spreadArray(__spreadArray([],a,true),[l[b].id],false)}if(a.length===f){break}}r.isWidgetValuesChanged=true}r.arrWidgetFields=__spreadArray([],a,true);r.showCustomizeWidget=true;(t=r.modalCustomizeWidget)===null||t===void 0?void 0:t.open()};this.saveWidgetDetailsHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();if(r.isWidgetValuesChanged){r.isSavingCustomizeWidget=true;r.fwSaveWidgetFields.emit(__spreadArray([],r.arrWidgetFields,true))}};this.closeWidgetDetailsHandler=function(e){if(e===void 0){e=null}var i;if(e){e.stopImmediatePropagation();e.stopPropagation()}(i=r.modalCustomizeWidget)===null||i===void 0?void 0:i.close();r.isWidgetValuesChanged=false;r.showCustomizeWidget=false;r.arrWidgetFields=null};this.widgetCheckHandler=function(e){var i;e.stopImmediatePropagation();e.stopPropagation();var t=e.detail.checked;if(r.arrWidgetFields){var l=e.detail.data.id;var n=c(r.productName);var a=((i=n===null||n===void 0?void 0:n.widgets)===null||i===void 0?void 0:i.count)||0;if(t&&r.arrWidgetFields.length<a){r.isWidgetValuesChanged=true;r.arrWidgetFields=__spreadArray(__spreadArray([],r.arrWidgetFields,true),[l],false)}else if(r.arrWidgetFields.includes(l)){r.isWidgetValuesChanged=true;var o=r.arrWidgetFields.indexOf(l);r.arrWidgetFields=__spreadArray(__spreadArray([],r.arrWidgetFields.slice(0,o),true),r.arrWidgetFields.slice(o+1),true)}}}}e.prototype.watchSearchHandler=function(){this.fwSearchField.emit({searching:this.searching})};e.prototype.watchSaveCustomizeWidgetChangeHandler=function(){if(!this.isSavingCustomizeWidget){this.closeWidgetDetailsHandler()}};e.prototype.watchFormValuesChangeHandler=function(e){this.validateFormValues(e)};e.prototype.watchProductNameChangeHandler=function(){this.validateFormValues()};e.prototype.forceRenderFields=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.fieldRerenderCount++;return[2]}))}))};e.prototype.componentWillLoad=function(){this.initializeSearchDebounce();this.validateFormValues();this.supportedFieldTypes=["TEXT","EMAIL","CHECKBOX","PARAGRAPH","NUMBER","DECIMAL","DATE","DROPDOWN","DEPENDENT_FIELD","RELATIONSHIP","MULTI_SELECT"]};e.prototype.disconnectedCallback=function(){this.debouncedHandleInput=null;this.removeResizeObserver()};e.prototype.validateFormValues=function(e){if(e===void 0){e=null}var i,t,r;this.fieldTypesCount=null;var l={filterable:0,unique:0};this.localFormValues=e?d(e):this.formValues?d(this.formValues):null;if(this.localFormValues){var n=(i=this.localFormValues)===null||i===void 0?void 0:i.fields;var a=g[this.productName];var o=a["reverseMappedFieldTypes"];var s=a.config;var f=(s===null||s===void 0?void 0:s.showDefaultTag)&&(s===null||s===void 0?void 0:s.defaultTagKey)&&s.defaultTagKey!==""?true:false;var p=f?s.defaultTagKey:"";if(n&&n.length>0){var u=0;var x=n.length;for(var v=0;v<x;v++){if(((r=(t=n[v])===null||t===void 0?void 0:t.field_options)===null||r===void 0?void 0:r.dependent)==="true"){var w=s.internalNamePrefix;n[v]=b({type:"22",label:n[v].label,name:n[v].name,fields:[n[v]]},w)}var y=n[v];if(!y){continue}if(o){if(h(o,y.type)){y.type=o[y.type]}else{console.log("".concat(y.type," is not added in the mapper - Unsupported field type"))}}var F=y.type;if(!(y===null||y===void 0?void 0:y.isNew)){if(F!=="RELATIONSHIP"&&((y===null||y===void 0?void 0:y.filterable)===true||(y===null||y===void 0?void 0:y.filterable)==="true")){l.filterable++}if(m(y)){l.unique++}if(!this.fieldTypesCount){this.fieldTypesCount={}}var k=F==="PRIMARY"?"TEXT":F;if(!h(this.fieldTypesCount,k)){this.fieldTypesCount[k]=0}this.fieldTypesCount[k]++}if(!f){u++}else if(p&&p!==""&&h(y,p)&&y[p]){u++}}var z=c(this.productName);this.enableFieldType=u<z.fields.count;this.enableFilterable=l.filterable<z.filterable.count;this.enableUnique=l.unique<z.unique.count}else{this.enableUnique=true;this.enableFilterable=true;this.enableFieldType=true;this.fieldTypesCount=null}}};e.prototype.renderFieldTypesHeader=function(e){var i="form-builder";var t=e.labels;var l=h(t,"headerProduct")?t.headerProduct:"";var n=h(t,"subHeaderProduct")?t.subHeaderProduct:"";var a=h(t,"subHeaderProductLink")?t.subHeaderProductLink:null;var d=a?o(a.label):"";var s=a?a.href:"";var f=d&&d!==""?true:false;var c=h(t,"fieldTypesHeader")?t.fieldTypesHeader:"";var p=h(t,"dragDropFieldTypes")?t.dragDropFieldTypes:"";var u=c&&c!==""?true:false;var b=u?"".concat(i,"-left-panel-header-desc"):"".concat(i,"-left-panel-header-desc-wo-header");return r("div",{class:"".concat(i,"-left-panel-header")},l&&l!==""&&r("label",{class:"".concat(i,"-left-panel-product-header-label")},o(l)),n&&n!==""&&r("span",{class:"form-builder-left-panel-sub-header-description"},r("label",{class:"form-builder-left-panel-sub-header-description-label"},o(n)),f&&r("a",{class:"form-builder-left-panel-sub-header-description-link-anchor",href:s,target:"_blank"},d)),u&&r("label",{class:"".concat(i,"-left-panel-header-label")},o(c)),p&&p!==""&&r("label",{class:b},o(p)))};e.prototype.renderDisableFieldCreateByRole=function(e,i){if(this.role==="trial"){return r("div",{class:"".concat(i,"-left-panel-list-disabled-div")},r("fw-icon",{name:"lock",size:"30"}),r("label",{class:"".concat(i,"-left-panel-list-disabled-header")},o(e===null||e===void 0?void 0:e.freePlanFieldAddDisabledHeader)),r("label",{class:"".concat(i,"-left-panel-list-disabled-message")},o(e===null||e===void 0?void 0:e.freePlanFieldAddDisabledMessage)),r("fw-button",{color:"primary",onFwClick:this.explorePlanHandler,class:"".concat(i,"-left-panel-list-disabled-button")},o(e===null||e===void 0?void 0:e.freePlanFieldAddDisabledButton)))}};e.prototype.renderDisableFieldCreateByPermission=function(e,i){var t=p(this.role,this.permission,"CREATE");if(!t&&this.role!=="trial"){return r("div",{class:"".concat(i,"-left-panel-list-disabled-div")},r("fw-icon",{name:"lock",size:"30"}),r("label",{class:"".concat(i,"-left-panel-list-disabled-header")},o(e===null||e===void 0?void 0:e.noCreatePermissionFieldAddDisabledHeader)),r("label",{class:"".concat(i,"-left-panel-list-disabled-message")},o(e===null||e===void 0?void 0:e.noCreatePermissionFieldAddDisabledMessage)))}};e.prototype.renderFieldTypeElement=function(e,i,t,n){if(e==="PRIMARY"){return null}var a=t===null||t===void 0?void 0:t.fieldProps[e];var d=i[e];var s=d.type;if(!this.supportedFieldTypes.includes(s)){return null}var f=!this.enableFieldType;var p=f?this.getInterpolatedMaxLimitLabel("fields"):"";var u=c(this.productName);if(!f&&h(this.fieldTypesCount,s)&&this.fieldTypesCount[s]>0&&h(u,s)&&this.fieldTypesCount[s]>=u[s].count){f=true;p=f?this.getInterpolatedMaxLimitLabel(s):""}var b=h(a,"display_label")?a.display_label:"";var m=h(a,"description")?o(a.description):"";var g=m&&m!==""?true:false;var x=h(a,"help")?o(a.help):"";var v=x&&x!==""?true:false;var w=h(a,"link")?a.link:null;var y=w?o(w.label):"";var F=w?w.href:"";var k=y&&y!==""?true:false;var z=h(a,"has_bottom_border")?a.has_bottom_border:false;return r(l,null,r("fw-field-type-menu-item",{index:n,key:s,value:s,dataProvider:d,tooltip:p,disabled:f,label:b,iconName:d.icon.name,iconBackgroundColor:d.icon.bg_color,onFwAddClick:this.addNewFieldTypeHandler}),g&&r("span",{class:"field-type-menu-description"},r("label",{class:"field-type-menu-description-label"},m),k&&r("a",{class:"field-type-menu-description-link-anchor",href:F,target:"_blank"},y),v&&r("fw-tooltip",{placement:"right",trigger:"hover",content:x},r("fw-icon",{class:"field-type-menu-help-fw-icon",size:14,name:"help",color:"#12344d"}))),z&&r("hr",{class:"field-type-menu-item-bottom-border"}))};e.prototype.renderFieldEditorElement=function(e,i,t,l){if(!e){return null}var n=e.type;var a=this.getDefaultFieldTypeSchema(n);if(!a){return null}var o=u(e,this.productName,i,!this.searching);var d=this.expandedFieldIndex===i?true:false;var s="".concat(e.id,"_").concat(i.toString());return r("fw-field-editor",{index:i,key:s,productName:this.productName,dataProvider:e,entityName:l,expanded:d,isPrimaryField:o,pinned:o?"top":"",disabled:t,disabledSort:this.searching,permission:this.permission,role:this.role,enableUnique:this.enableUnique,enableFilterable:this.enableFilterable,defaultFieldTypeSchema:a,lookupTargetObjects:this.lookupTargetObjects,formValues:this.localFormValues,isLoading:this.isLoading,onFwUpdate:this.saveFieldHandler,onFwDelete:this.deleteFieldHandler,onFwExpand:this.expandFieldHandler,onFwReorder:this.reorderFieldProgressHandler})};e.prototype.renderWidgetElement=function(e,i){var t,l;var n=c(this.productName);var a=((t=n===null||n===void 0?void 0:n.widgets)===null||t===void 0?void 0:t.count)||0;var o=u(e,this.productName,i);var d=!o?((l=this.arrWidgetFields)===null||l===void 0?void 0:l.includes(e.id))?true:false:true;var s=o?true:!d?this.arrWidgetFields.length>=a:false;return r("fw-widget-customize-field-item",{index:i,key:e.id,label:e.label,dataProvider:e,isPrimaryField:o,pinned:o?"top":"",selected:d,disabled:s,onFwCheck:this.widgetCheckHandler})};e.prototype.render=function(){var e=this;var i="form-builder";var t=this.localFormValues;var l=x.fieldTypes;var a=g[this.productName];var d=a===null||a===void 0?void 0:a.config;var s=a===null||a===void 0?void 0:a.labels;var f=a===null||a===void 0?void 0:a.fieldOrder;if(!this.showLookupField){var c=f.indexOf("RELATIONSHIP");if(c>-1){f.splice(c,1)}}if(!this.showDependentField){var p=f.indexOf("DEPENDENT_FIELD");if(p>-1){f.splice(p,1)}}var u=this.expandedFieldIndex>-1?true:false;var b=t?t.name:"";var m=h(s,"fieldsHeader")?s.fieldsHeader:"";var v=f&&f.length>0?f.map((function(i,t){return e.renderFieldTypeElement(i,l,a,t)})):null;var w=this.selectedFieldTypeFilterOption&&this.selectedFieldTypeFilterOption!==""&&this.selectedFieldTypeFilterOption!==this.FILTER_ALL_FIELDS?true:false;var y=w?this.arrFilteredByTypeFields:this.searching?this.arrSearchedFields:t&&t.fields?t.fields:[];var F=y&&y.length>0?y.map((function(i,t){return e.renderFieldEditorElement(i,t,u,b)})):null;var k=this.searching&&(!F||F.length===0)||w&&(!F||F.length===0);var z=(d===null||d===void 0?void 0:d.customizeWidget)||false;var T=this.showCustomizeWidget&&y&&y.length>0?y.map((function(i,t){return e.renderWidgetElement(i,t)})):null;var C=(d===null||d===void 0?void 0:d.filterByType)||false;if(!this.filterByFieldTypeOptions&&f&&f.length>0){var _=a===null||a===void 0?void 0:a.fieldProps;var P=f.length;this.filterByFieldTypeOptions=[{text:o("filterOptionAllFields"),value:this.FILTER_ALL_FIELDS}];for(var E=0;E<P;E++){this.filterByFieldTypeOptions.push({text:o(_[f[E]].display_label),value:f[E]})}}var H="".concat(i,"-right-panel");var W="".concat(i,"-left-panel");var I="".concat(H,"-header");var L=W;if(u||this.searching){L+=" ".concat(W,"--disabled")}if(u){I+=" ".concat(H,"-header--disabled")}return r(n,{tabIndex:"-1"},r("div",{class:i},r("div",{class:L},this.renderFieldTypesHeader(a),r("div",{class:"".concat(i,"-left-panel-list-container")},r("fw-drag-container",{class:"".concat(i,"-left-panel-field-types-list"),id:"fieldTypesList",addOnDrop:false,sortable:false},v),this.renderDisableFieldCreateByRole(d,i),this.renderDisableFieldCreateByPermission(d,i))),r("div",{class:H},r("div",{class:I},r("div",{class:"".concat(i,"-right-panel-header-content")},!C&&r("label",{class:"".concat(i,"-right-panel-header-label")},o(m)),C&&r("div",{class:"".concat(i,"-right-panel-header-right-filter-by-div")},r("label",{class:"".concat(i,"-right-panel-header-filter-label")},o("filterFields")),r("fw-select",{class:"".concat(i,"-filter-by-field-type-select"),options:this.filterByFieldTypeOptions,value:this.selectedFieldTypeFilterOption,onFwChange:this.fieldTypeFilterChangeHandler})),r("div",{class:"".concat(i,"-right-panel-header-right-div")},z&&r("fw-button",{id:"customizeWidgetFieldsBtn",color:"link",disabled:this.searching,onFwClick:this.openCustomizeWidgetModalHandler},r("fw-icon",{name:"modify",slot:"before-label"}),o("customizeWidget")),r("fw-input",{"clear-input":true,"icon-left":"search",placeholder:o("searchFields"),onFwInput:this.debouncedHandleInput,onFwInputClear:this.clearSearchHandler,class:"".concat(i,"-right-panel-header-search-input")})))),r("div",{ref:function(i){return e.fieldEditorPanel=i},class:"".concat(i,"-right-panel-list-container")},!k&&r("fw-drag-container",{key:"field-drag-container-".concat(this.fieldRerenderCount.toString()),class:"".concat(i,"-right-panel-field-editor-list"),id:"fieldsContainer",acceptFrom:"fieldTypesList",addOnDrop:false,sortable:true,onFwDrop:this.fieldTypeDropHandler},F),k&&r("div",{class:"".concat(i,"-right-panel-empty-list-div")},r("div",{class:"".concat(i,"-right-panel-empty-list-content")},r("span",{class:"".concat(i,"-right-panel-empty-list-image-span")},r("img",{alt:"",src:this.emptySearchImage,class:"".concat(i,"-right-panel-empty-list-image")})),r("label",{class:"".concat(i,"-right-panel-empty-search-message")},o("noSearchItemsFound"))))))),r("fw-modal",{ref:function(i){return e.modalCustomizeWidget=i},size:"small",hasCloseIconButton:false},r("fw-modal-title",null,r("span",{class:"cusomize-widget-header"},r("span",{class:"cusomize-widget-title"},o("customizeWidgetModalHeader")),r("span",{class:"cusomize-widget-description"},o("customizeWidgetModalHint")))),r("fw-modal-content",null,this.showCustomizeWidget&&r("fw-drag-container",{class:"cusomize-widget-list",id:"customizeWidgetList",addOnDrop:false,sortable:false},T)),r("fw-modal-footer",null,r("span",{class:"cusomize-widget-modal-footer"},r("fw-button",{color:"secondary",onFwClick:this.closeWidgetDetailsHandler},o("customizeWidgetModalCancelBtn")),r("fw-button",{loading:this.isSavingCustomizeWidget,onFwClick:this.saveWidgetDetailsHandler},o("customizeWidgetModalSaveBtn"))))))};Object.defineProperty(e.prototype,"host",{get:function(){return a(this)},enumerable:false,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{searching:["watchSearchHandler"],isSavingCustomizeWidget:["watchSaveCustomizeWidgetChangeHandler"],formValues:["watchFormValuesChangeHandler"],productName:["watchProductNameChangeHandler"]}},enumerable:false,configurable:true});return e}());y.style=w}}}));