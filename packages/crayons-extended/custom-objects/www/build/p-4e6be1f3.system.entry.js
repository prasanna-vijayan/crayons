var __awaiter=this&&this.__awaiter||function(e,t,o,i){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,n){function r(e){try{s(i.next(e))}catch(t){n(t)}}function a(e){try{s(i["throw"](e))}catch(t){n(t)}}function s(e){e.done?o(e.value):l(e.value).then(r,a)}s((i=i.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var o={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},i,l,n,r;return r={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(i)throw new TypeError("Generator is already executing.");while(o)try{if(i=1,l&&(n=r[0]&2?l["return"]:r[0]?l["throw"]||((n=l["return"])&&n.call(l),0):l.next)&&!(n=n.call(l,r[1])).done)return n;if(l=0,n)r=[r[0]&2,n.value];switch(r[0]){case 0:case 1:n=r;break;case 4:o.label++;return{value:r[1],done:false};case 5:o.label++;l=r[1];r=[0];continue;case 7:r=o.ops.pop();o.trys.pop();continue;default:if(!(n=o.trys,n=n.length>0&&n[n.length-1])&&(r[0]===6||r[0]===2)){o=0;continue}if(r[0]===3&&(!n||r[1]>n[0]&&r[1]<n[3])){o.label=r[1];break}if(r[0]===6&&o.label<n[1]){o.label=n[1];n=r;break}if(n&&o.label<n[2]){o.label=n[2];o.ops.push(r);break}if(n[2])o.ops.pop();o.trys.pop();continue}r=t.call(e,o)}catch(a){r=[6,a];l=0}finally{i=n=0}if(r[0]&5)throw r[1];return{value:r[0]?r[1]:void 0,done:true}}};System.register(["./p-17854542.system.js","./p-07a9c0ce.system.js","./p-81fe435d.system.js","./p-f5745e7b.system.js","./p-a69cb9a8.system.js"],(function(e){"use strict";var t,o,i,l,n,r,a;return{setters:[function(e){t=e.r;o=e.c;i=e.h;l=e.g},function(e){n=e.T},function(e){r=e.d},function(e){a=e.d},function(){}],execute:function(){var s=':host{font-family:var(--fw-font-family, -apple-system, BlinkMacSystemFont, "Segoe UI", roboto, oxygen, ubuntu, cantarell, "Open Sans", "Helvetica Neue", sans-serif);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;-webkit-box-sizing:border-box;box-sizing:border-box}:host{display:block;-webkit-box-sizing:border-box;box-sizing:border-box}.co-export-modal-content{height:100%;overflow:hidden}.co-export-content{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-padding-before:20px;padding-block-start:20px;gap:24px}.co-export-content .clearExportFilter{font-weight:700;color:#2c5cc5;cursor:pointer}.co-export-content .co-export-format{width:100%;height:auto;display:-ms-flexbox;display:flex;gap:24px;-ms-flex-align:center;align-items:center;-webkit-box-sizing:border-box;box-sizing:border-box}.co-export-content .co-export-format .co-export-format-label{width:auto;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#475867;font-size:14px;line-height:20px;margin:0}.co-export-content .co-export-field-selection{width:100%;height:auto;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-webkit-box-sizing:border-box;box-sizing:border-box;gap:10px}.co-export-content .co-export-field-selection .co-export-field-header{width:100%;height:20px;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-sizing:border-box;box-sizing:border-box}.co-export-content .co-export-field-selection .co-export-field-header .co-export-field-header-label{width:auto;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:start;color:#12344d;font-weight:600;font-size:14px;line-height:20px}.co-export-content .co-export-field-selection .co-export-field-header .co-export-field-header-selected-count-label{width:auto;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:end;color:#475867;font-size:14px;line-height:20px}.co-export-content .co-export-field-selection .co-export-field-content{width:100%;height:auto;padding-inline:0;padding-block:24px;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:16px;border-radius:4px;border:1px solid #cfd7df}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-header{width:100%;height:32px;padding-inline:24px;padding-block:0;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:justify;justify-content:space-between}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-header .co-export-field-select-all-label{display:inline-block;font-weight:500;margin:0}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-header .co-export-field-search{width:50%}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-fields{width:100%;height:auto;padding-inline:24px;padding-block:0;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;gap:32px;overflow-y:auto;max-height:calc( 100vh - 56px - 56px - 20px - 24px - 58px - 24px - 22px - 20px - 10px - 32px - 52px - 32px - 16px )}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-fields .co-export-field-empty-search-message{width:100%;margin-inline:0;margin-block:16px;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;text-align:center;color:#12344d;font-size:14px;font-weight:400;line-height:24px}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-fields .co-export-field-content-fields-column1{width:calc(50% - 32px);height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:10px}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-fields .co-export-field-content-fields-column1--full-width{width:100%}.co-export-content .co-export-field-selection .co-export-field-content .co-export-field-content-fields .co-export-field-content-fields-column2{width:50%;height:auto;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;gap:10px}.co-export-content--without-filter .co-export-field-selection .co-export-field-content .co-export-field-content-fields{max-height:calc( 100vh - 56px - 56px - 20px - 24px - 22px - 20px - 10px - 32px - 52px - 32px - 16px )}.co-export-modal-footer{width:100%;height:100%;-webkit-box-sizing:border-box;box-sizing:border-box;display:-ms-flexbox;display:flex;gap:12px}';var c=e("fw_co_export",function(){function e(e){var i=this;t(this,e);this.fwExport=o(this,"fwExport",7);this.fwCloseExport=o(this,"fwCloseExport",7);this.SEARCH_COUNT=10;this.boolAddedClearFilterEvent=false;this.allFieldsSelected=false;this.arrSearchedFields=null;this.searching=false;this.searchText="";this.clearFilter=false;this.selectedFieldCount=0;this.isOpen=false;this.value=null;this.resetStates=function(){i.debouncedHandleInput=null;i.arrSearchedFields=null;i.searching=false;i.searchText="";i.allFieldsSelected=false;i.clearFilter=false;i.selectedFieldCount=0;i.value=null};this.initializeSearchDebounce=function(){if(!i.debouncedHandleInput){i.debouncedHandleInput=r(i.searchChangeHandler,i)}};this.addClearFilterEvent=function(){if(!i.boolAddedClearFilterEvent){var e=i.host.shadowRoot.querySelector(".clearExportFilter");if(e){i.boolAddedClearFilterEvent=true;e.addEventListener("click",i.clearFiltersHandler)}}};this.clearFiltersHandler=function(e){var t;e.stopImmediatePropagation();e.stopPropagation();if((t=i.value)===null||t===void 0?void 0:t.filter){i.value.filter.value=false}i.clearFilter=true};this.searchChangeHandler=function(e){var t,o,l,n;e.stopImmediatePropagation();e.stopPropagation();var r=((o=(t=e===null||e===void 0?void 0:e.detail)===null||t===void 0?void 0:t.value)===null||o===void 0?void 0:o.trim())||"";i.searchText=r;if(r){if(((n=(l=i.value)===null||l===void 0?void 0:l.fields)===null||n===void 0?void 0:n.length)>0){var s=r.toLowerCase();var c=i.value.fields.filter((function(e){return e.label.toLowerCase().indexOf(s)!==-1}));i.searching=true;i.arrSearchedFields=a(c);return}}i.searching=false;i.arrSearchedFields=null};this.clearSearchHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();i.arrSearchedFields=null;i.searching=false;i.searchText=""};this.selectAllFieldsChangeHandler=function(e){var t,o;e.stopImmediatePropagation();e.stopPropagation();var l=e.detail.meta.checked;i.allFieldsSelected=l;if(i.searching&&i.arrSearchedFields){var n=i.arrSearchedFields.length;for(var r=0;r<n;r++){var a=i.arrSearchedFields[r];if(!Object.prototype.hasOwnProperty.call(a,"disabled")||!a.disabled){i.arrSearchedFields[r]=Object.assign(Object.assign({},a),{selected:l})}}}if(((o=(t=i.value)===null||t===void 0?void 0:t.fields)===null||o===void 0?void 0:o.length)>0){var s=i.value.fields;var c=s.length;for(var r=0;r<c;r++){var a=s[r];if(!Object.prototype.hasOwnProperty.call(a,"disabled")||!a.disabled){s[r]=Object.assign(Object.assign({},a),{selected:l})}}i.updateSelectedCount()}};this.fieldSelectionChangeHandler=function(e){var t,o;e.stopImmediatePropagation();e.stopPropagation();if(((o=(t=i.value)===null||t===void 0?void 0:t.fields)===null||o===void 0?void 0:o.length)>0){var l=e.detail.checked;var n=e.detail.value;var r=i.value.fields.filter((function(e){return Object.prototype.hasOwnProperty.call(e,"id")&&e.id===n}));if(r&&r.length>0){r[0].selected=l;i.updateSelectedCount()}}};this.closeModalHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();i.fwCloseExport.emit()};this.exportHandler=function(e){e.stopImmediatePropagation();e.stopPropagation();i.fwExport.emit({value:a(i.value)})};this.exportFormatChangeHandler=function(e){var t,o;e.stopImmediatePropagation();e.stopPropagation();var l=(t=e===null||e===void 0?void 0:e.detail)===null||t===void 0?void 0:t.value;if(l&&l!==""&&((o=i.value)===null||o===void 0?void 0:o.formats)){i.value.formats.selectedValue=l}}}e.prototype.close=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.resetStates();this.isOpen=false;return[2,true]}))}))};e.prototype.open=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){this.initializeSearchDebounce();this.isOpen=true;return[2,true]}))}))};e.prototype.componentWillLoad=function(){var e,t;var o=((t=(e=this.value)===null||e===void 0?void 0:e.filter)===null||t===void 0?void 0:t.value)||false;this.clearFilter=!o;this.updateSelectedCount();this.initializeSearchDebounce()};e.prototype.componentDidUpdate=function(){this.addClearFilterEvent()};e.prototype.disconnectedCallback=function(){this.resetStates()};e.prototype.updateSelectedCount=function(){var e,t;if(((t=(e=this.value)===null||e===void 0?void 0:e.fields)===null||t===void 0?void 0:t.length)>0){var o=this.value.fields;var i=o.filter((function(e){return Object.prototype.hasOwnProperty.call(e,"selected")&&e.selected===true}));var l=(i===null||i===void 0?void 0:i.length)||0;this.selectedFieldCount=l;this.allFieldsSelected=l===o.length?true:false}else{this.selectedFieldCount=0;this.allFieldsSelected=false}};e.prototype.renderCheckboxField=function(e){var t=this.searching&&this.searchText&&this.searchText!==""?"search_".concat(this.searchText,"_").concat(e.id):"".concat(e.id);return i("fw-co-export-field",{key:t,value:e,onFwChange:this.fieldSelectionChangeHandler})};e.prototype.render=function(){var e=this;var t,o,l;var r=this.isOpen;var a=r?(t=this.value)===null||t===void 0?void 0:t.filter:null;var s=!this.clearFilter&&a?true:false;var c=s?n.t("export.filterInfo",{filtered:a.filtered,total:a.total}):"";var d=((o=this.value)===null||o===void 0?void 0:o.formats)||null;var p=d?d.selectedValue:"";var f=d?(d===null||d===void 0?void 0:d.options)||null:null;var x=this.searching?this.arrSearchedFields:((l=this.value)===null||l===void 0?void 0:l.fields)||null;var u=x?x.length:0;var h=this.searching||u>this.SEARCH_COUNT;var b=h&&this.searching&&u<=0;var v=u<=this.SEARCH_COUNT?u:Math.ceil(u/2);var g=h?u-v:0;var m=g>0;var w=v>0?x.slice(0,v).map((function(t){return e.renderCheckboxField(t)})):null;var y=m?x.slice(v+1).map((function(t){return e.renderCheckboxField(t)})):null;var F="co-export-content";if(!s){F+=" co-export-content--without-filter"}var k="co-export-field-content-fields-column1";if(!m){k+=" co-export-field-content-fields-column1--full-width"}return i("fw-modal",{isOpen:this.isOpen,slider:true,icon:"download",titleText:n.t("export.modalTitle"),onFwClose:this.closeModalHandler},i("fw-modal-content",{class:"co-export-modal-content"},i("div",{class:F},s&&i("fw-inline-message",{open:true,type:"info",closable:false},i("span",{innerHTML:c})),i("div",{class:"co-export-format"},i("span",{class:"co-export-format-label"},n.t("export.exportFormat")),f&&f.length>0&&i("fw-radio-group",{orientation:"row",value:p,onFwChange:this.exportFormatChangeHandler},f.map((function(e){return i("fw-radio",{value:e.value},e.label)})))),i("div",{class:"co-export-field-selection"},i("div",{class:"co-export-field-header"},i("span",{class:"co-export-field-header-label"},n.t("export.fields")),i("span",{class:"co-export-field-header-selected-count-label"},n.t("export.selectedFields",{count:this.selectedFieldCount}))),i("div",{class:"co-export-field-content"},i("div",{class:"co-export-field-content-header"},i("fw-checkbox",{class:"co-export-field-select-all",checked:this.allFieldsSelected,onFwChange:this.selectAllFieldsChangeHandler},i("span",{class:"co-export-field-select-all-label"},n.t("export.selectAllFields"))),h&&i("fw-input",{"clear-input":true,"icon-left":"search",placeholder:n.t("export.searchFieldsPrompt"),onFwInput:this.debouncedHandleInput,onFwInputClear:this.clearSearchHandler,class:"co-export-field-search"})),i("div",{class:"co-export-field-content-fields"},!b&&i("div",{class:k},w),!b&&m&&i("div",{class:"co-export-field-content-fields-column2"},y),b&&i("span",{class:"co-export-field-empty-search-message"},n.t("export.noSearchResults"))))))),i("fw-modal-footer",null,i("span",{class:"co-export-modal-footer"},i("fw-button",{color:"secondary",onFwClick:this.closeModalHandler},n.t("export.cancelButton")),i("fw-button",{onFwClick:this.exportHandler},n.t("export.submitButton")))))};Object.defineProperty(e.prototype,"host",{get:function(){return l(this)},enumerable:false,configurable:true});return e}());c.style=s}}}));